# å˜‰ç¾©å¸‚å„€éŒ¶æ¿

## ç³»çµ±ä»‹é¢å±•ç¤º

![ç³»çµ±ä¸»ä»‹é¢](screenshot.jpeg)

*å˜‰ç¾©å¸‚å„å–®ä½æ¡ˆä»¶é‡åˆ†æç³»çµ±ï¼Œæä¾›ç›´è§€çš„æ¡ˆä»¶çµ±è¨ˆèˆ‡æœˆåº¦è¶¨å‹¢è¦–è¦ºåŒ–*

### UI çµ„ä»¶å°æ‡‰èªªæ˜

| ä»‹é¢å€åŸŸ | å°æ‡‰çµ„ä»¶æª”æ¡ˆ | åŠŸèƒ½èªªæ˜ |
|---------|-------------|----------|
| ğŸ”µ **é ‚éƒ¨æ°£æ³¡åœ–è¡¨å€** | `BubbleLine.js` | å„å–®ä½æ¡ˆä»¶é‡è¦–è¦ºåŒ–ï¼Œæ°£æ³¡å¤§å°ä»£è¡¨æ¡ˆä»¶é‡ï¼Œé¡¯ç¤ºæ”¶ç¹³ç‡å’ŒåŸ·è¡Œç‡ |
| ğŸŸ¡ **åº•éƒ¨æœˆåº¦åˆ†æå€** | `YearChart.js` | æœˆæ¡ˆä»¶é‡åˆ†æï¼ŒçµåˆæŠ˜ç·šåœ–èˆ‡é•·æ¢åœ–å±•ç¤ºæœˆåº¦è¶¨å‹¢ |
| ğŸ“Š **å³å´çµ±è¨ˆé¢æ¿** | å…§å»ºæ–¼ä¸»çµ„ä»¶ | é¡¯ç¤ºå·²é–‹æ¡ˆä»¶é‡ã€æ¡ˆä»¶é‡‘é¡ã€æ”¶ç¹³æ¡ˆä»¶/é‡‘é¡ã€æ’¤éŠ·æ¡ˆä»¶ç­‰çµ±è¨ˆ |
| ğŸ›ï¸ **å¹´åº¦åˆ‡æ›æ§åˆ¶** | `YearButton.js` | å¹´åº¦é¸æ“‡å™¨ï¼Œæ”¯æ´ä¸åŒå¹´åº¦è³‡æ–™åˆ‡æ› |
| ğŸ“… **æ›´æ–°æ™‚é–“é¡¯ç¤º** | `LastUpdated.js` | é¡¯ç¤ºè³‡æ–™æœ€å¾Œæ›´æ–°æ™‚é–“ |
| ğŸ”— **å°èˆªæŒ‰éˆ•** | `Button.js` | åˆ‡å›ä¸Šå±¤åŠŸèƒ½æŒ‰éˆ• |

**ä¸»è¦æ”¹ç‰ˆç‰¹è‰²ï¼š**
- **ç°¡åŒ–ç‰ˆé¢è¨­è¨ˆ** - ç§»é™¤è¤‡é›œçš„ç”œç”œåœˆåœ–å’Œæ³•æ¢æ’è¡Œï¼Œå°ˆæ³¨æ–¼æ ¸å¿ƒæ¡ˆä»¶é‡åˆ†æ
- **é›™å€å¡Šå¸ƒå±€** - ä¸Šæ–¹æ°£æ³¡åœ– + ä¸‹æ–¹æœˆåº¦åˆ†æçš„æ¸…æ™°åˆ†å±¤
- **å°ˆæ³¨å˜‰ç¾©å¸‚** - é‡å°å˜‰ç¾©å¸‚å„å–®ä½ï¼ˆè²¡æ”¿ç¨…å‹™å±€ã€ç’°ä¿è­·å±€ã€æ¶ˆé˜²å±€ã€å¸‚æ”¿åºœã€è­¦å¯Ÿå±€ï¼‰çš„å°ˆé–€åˆ†æ

**å®¹å™¨çµ„ä»¶ï¼š** `containers/HomePage/index.js` çµ±ç±Œç®¡ç†é é¢å¸ƒå±€èˆ‡è³‡æ–™æµ

## ä½¿ç”¨æŠ€è¡“æ¶æ§‹

### ç¨‹å¼èªè¨€èˆ‡æ ¸å¿ƒæŠ€è¡“
- **JavaScript (ES6+)** - ä¸»è¦é–‹ç™¼èªè¨€
- **React 16.9.0** - å‰ç«¯æ¡†æ¶
- **Redux + Redux-Saga** - ç‹€æ…‹ç®¡ç†èˆ‡éåŒæ­¥è™•ç†

### é–‹ç™¼æ¶æ§‹
- **Create React App** - å°ˆæ¡ˆè…³æ‰‹æ¶
- **React Hooks** - çµ„ä»¶é‚è¼¯ç®¡ç†
- **Styled Components** - CSS-in-JS æ¨£å¼è§£æ±ºæ–¹æ¡ˆ
- **Styled System** - è¨­è¨ˆç³»çµ±èˆ‡ä¸»é¡Œç®¡ç†

### è³‡æ–™è¦–è¦ºåŒ–å·¥å…·
- **@vx/* å¥—ä»¶ç¾¤** - åŸºæ–¼ D3.js çš„ React åœ–è¡¨åº«
  - `@vx/axis` - åº§æ¨™è»¸
  - `@vx/shape` - å¹¾ä½•åœ–å½¢
  - `@vx/scale` - æ¯”ä¾‹å°º
  - `@vx/tooltip` - æç¤ºæ¡†
- **D3.js ç›¸é—œ**
  - `d3-array` - é™£åˆ—è™•ç†
  - `d3-format` - æ•¸å€¼æ ¼å¼åŒ–
  - `d3-shape` - å½¢ç‹€ç”Ÿæˆ
- **Flubber** - å½¢ç‹€è®Šå½¢å‹•ç•«
- **@tweenjs/tween.js** - è£œé–“å‹•ç•«

### å…¶ä»–å·¥å…·èˆ‡å‡½å¼åº«
- **Lodash** - å·¥å…·å‡½å¼åº«
- **Immutable.js** - ä¸å¯è®Šè³‡æ–™çµæ§‹
- **React-Modal** - å½ˆçª—çµ„ä»¶
- **Open Color** - è‰²å½©ç³»çµ±

## ç¨‹å¼æ¸…å–®

### æ ¸å¿ƒç›®éŒ„çµæ§‹
```
src/
â”œâ”€â”€ components/           # é€šç”¨ UI çµ„ä»¶
â”‚   â”œâ”€â”€ Charts/          # åœ–è¡¨åŸºç¤çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChartBase.js        # åœ–è¡¨åŸºåº•é¡åˆ¥
â”‚   â”‚   â”œâ”€â”€ TweenShape.js       # å‹•ç•«å½¢ç‹€çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ PathInterpolation.js # è·¯å¾‘æ’å€¼
â”‚   â”‚   â””â”€â”€ LineBreakText.js    # å¤šè¡Œæ–‡å­—è™•ç†
â”‚   â”œâ”€â”€ ThemeProvider/   # ä¸»é¡Œç³»çµ±
â”‚   â”‚   â”œâ”€â”€ theme.js            # ä¸»é¡Œé…ç½®ï¼ˆé¡è‰²ã€å­—é«”ç­‰ï¼‰
â”‚   â”‚   â””â”€â”€ global-styles.js    # å…¨åŸŸæ¨£å¼
â”‚   â”œâ”€â”€ Button.js        # æŒ‰éˆ•çµ„ä»¶
â”‚   â”œâ”€â”€ Modal.js         # å½ˆçª—çµ„ä»¶
â”‚   â”œâ”€â”€ Dropdown.js      # ä¸‹æ‹‰é¸å–®
â”‚   â””â”€â”€ ...å…¶ä»– UI çµ„ä»¶
â”œâ”€â”€ containers/          # é é¢å®¹å™¨çµ„ä»¶
â”‚   â”œâ”€â”€ HomePage/        # ä¸»è¦–è¦ºåŒ–é é¢
â”‚   â”‚   â”œâ”€â”€ index.js            # ä¸»é é¢é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ dataHandler.js      # è³‡æ–™è™•ç†å‡½å¼
â”‚   â”‚   â”œâ”€â”€ BubbleLine.js       # æ°£æ³¡ç·šåœ–
â”‚   â”‚   â”œâ”€â”€ TypeDonut.js        # é¡å‹ç”œç”œåœˆåœ–
â”‚   â”‚   â”œâ”€â”€ YearChart.js        # å¹´åº¦åœ–è¡¨
â”‚   â”‚   â”œâ”€â”€ PercentBars.js      # ç™¾åˆ†æ¯”æ¢å½¢åœ–
â”‚   â”‚   â”œâ”€â”€ LawTops.js          # æ’è¡Œæ¦œåœ–è¡¨
â”‚   â”‚   â””â”€â”€ YearByYear/         # é€å¹´åˆ†æå­é é¢
â”‚   â”œâ”€â”€ SummaryPage/     # æ‘˜è¦é é¢
â”‚   â””â”€â”€ Layout/          # ç‰ˆé¢é…ç½®çµ„ä»¶
â”œâ”€â”€ services/            # æœå‹™å±¤
â”‚   â””â”€â”€ api/            # API ç›¸é—œ
â”‚       â”œâ”€â”€ config.js           # API åŸºç¤è¨­å®š
â”‚       â”œâ”€â”€ sagas.js            # Redux-Saga éåŒæ­¥è™•ç†
â”‚       â””â”€â”€ constants.js        # API å¸¸æ•¸å®šç¾©
â”œâ”€â”€ stores/              # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ createStore.js          # Store å»ºç«‹è¨­å®š
â”‚   â””â”€â”€ reducers.js             # Reducer åˆä½µ
â”œâ”€â”€ utils/               # å·¥å…·å‡½å¼
â””â”€â”€ hoc/                # é«˜éšçµ„ä»¶
```

### ä¸»è¦æª”æ¡ˆåŠŸèƒ½èªªæ˜

**è³‡æ–™è™•ç†å±¤**
- `dataHandler.js` - è™•ç† JSON è³‡æ–™çš„è½‰æ›èˆ‡è¨ˆç®—é‚è¼¯
- `api/sagas.js` - ç®¡ç† API å‘¼å«èˆ‡è³‡æ–™æµ

**è¦–è¦ºåŒ–çµ„ä»¶**
- `BubbleLine.js` - æ°£æ³¡åœ–è¡¨ï¼Œå±•ç¤ºå„å–®ä½æ¡ˆä»¶é‡èˆ‡æ”¶ç¹³ç‡
- `YearChart.js` - æœˆåº¦åˆ†æåœ–è¡¨ï¼ŒçµåˆæŠ˜ç·šåœ–èˆ‡é•·æ¢åœ–
- `TypeDonut.js` - ç”œç”œåœˆåœ–ï¼ˆå‚™ç”¨çµ„ä»¶ï¼Œç•¶å‰ç‰ˆæœ¬æœªä½¿ç”¨ï¼‰
- `PercentBars.js` - ç™¾åˆ†æ¯”æ©«æ¢åœ–ï¼ˆå‚™ç”¨çµ„ä»¶ï¼‰
- `LawTops.js` - æ’è¡Œæ¦œè¦–è¦ºåŒ–ï¼ˆå‚™ç”¨çµ„ä»¶ï¼‰

**UI çµ„ä»¶**
- `ThemeProvider/theme.js` - çµ±ä¸€ç®¡ç†é¡è‰²ã€å­—é«”ã€æ–·é»è¨­å®š
- `Modal.js` - å½ˆçª—ç³»çµ±
- `Dropdown.js` - ç¯©é¸æ¢ä»¶é¸å–®

## ç¨‹å¼ç·¨è­¯èˆ‡å°è£

### æœ¬åœ°é–‹ç™¼
```bash
# å®‰è£ä¾è³´
npm install

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ (http://localhost:3000)
npm start

# åŸ·è¡Œæ¸¬è©¦
npm test
```

### ç”Ÿç”¢ç’°å¢ƒç·¨è­¯
```bash
# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬åˆ° build/ ç›®éŒ„
npm run build

# éƒ¨ç½²åˆ° GitHub Pages
npm run deploy
```

### å»ºç½®ç”¢å‡ºç‰©
- ç·¨è­¯å¾Œçš„éœæ…‹æª”æ¡ˆä½æ–¼ `build/` ç›®éŒ„
- åŒ…å«æœ€ä½³åŒ–çš„ JavaScriptã€CSS èˆ‡è³‡æºæª”æ¡ˆ
- æ”¯æ´ IE 11+ åŠç¾ä»£ç€è¦½å™¨

## ç¨‹å¼æ›´æ–°èˆ‡ç¶­è­·æŒ‡å—

### 1. åœ–è¡¨è®€å–è³‡æ–™ (JSON) çš„æ–¹æ³•

**API æ–‡æª”èˆ‡æ¸¬è©¦ï¼š**
- Swagger UI æ–‡æª”ï¼šhttps://relab.cc/law-api-test/doc/
  - æä¾›å®Œæ•´çš„ API ç«¯é»èªªæ˜
  - å¯ç·šä¸Šæ¸¬è©¦ API å‘¼å«
  - åŒ…å«è«‹æ±‚/å›æ‡‰æ ¼å¼ç¯„ä¾‹
  - æ”¯æ´ OAuth2 èªè­‰

**API è¨­å®šä½ç½®ï¼š**
- `src/services/api/config.js` - ä¿®æ”¹ `API_BASE` å¸¸æ•¸ä¾†è®Šæ›´è³‡æ–™ä¾†æº
  ```javascript
  const BASE_URI = 'https://relab.cc/law-api-test/v2';
  export const API_BASE = BASE_URI;
  ```

**è³‡æ–™è™•ç†æµç¨‹ï¼š**
1. API å‘¼å«åœ¨ `src/services/api/sagas.js` ä¸­è™•ç†
2. åŸå§‹ JSON è³‡æ–™ç¶“ç”± `src/containers/HomePage/dataHandler.js` è½‰æ›
3. é—œéµè½‰æ›å‡½å¼ï¼š
   - `mapData()` - å°‡åŸå§‹è³‡æ–™æ˜ å°„ç‚ºçµ„ä»¶å¯ç”¨æ ¼å¼
   - `getBureauTotal()` - è¨ˆç®—å„æ©Ÿé—œç¸½è¨ˆæ•¸æ“š
   - `getTypes()` - æå–é¡å‹çµ±è¨ˆ
   - `getMonthData()` - æ•´ç†æœˆä»½è³‡æ–™

**JSON è³‡æ–™æ ¼å¼è¦æ±‚ï¼š**
è«‹åƒè€ƒ [Swagger UI æ–‡æª”](https://relab.cc/law-api-test/doc/) ä¸­çš„ API å›æ‡‰æ ¼å¼ï¼Œè©²æ–‡æª”æä¾›ï¼š
- æœ€æ–°çš„è³‡æ–™çµæ§‹å®šç¾©
- å®Œæ•´çš„æ¬„ä½èªªæ˜
- å¯¦éš›çš„å›æ‡‰ç¯„ä¾‹
- å„ç«¯é»çš„è©³ç´°åƒæ•¸

**æ³¨æ„ï¼š** å¦‚ API æ ¼å¼æœ‰ç•°å‹•ï¼Œè«‹ä»¥ Swagger æ–‡æª”ç‚ºæº–ï¼Œä¸¦ç›¸æ‡‰æ›´æ–° `dataHandler.js` ä¸­çš„è³‡æ–™è™•ç†é‚è¼¯ã€‚

### 2. åœ–è¡¨å¢æ¸›éæ¿¾æ¢ä»¶çš„ç¨‹å¼èª¿å‹•

**éœ€è¦ä¿®æ”¹çš„æª”æ¡ˆï¼š**

**æ–°å¢ç¯©é¸æ¢ä»¶æ™‚ï¼š**
1. `src/containers/HomePage/index.js` 
   - åœ¨ state ä¸­æ–°å¢ç¯©é¸ç‹€æ…‹
   - å¢åŠ å°æ‡‰çš„ handler å‡½å¼

2. `src/containers/HomePage/dataHandler.js`
   - ä¿®æ”¹è³‡æ–™è™•ç†å‡½å¼ä»¥æ”¯æ´æ–°çš„ç¯©é¸é‚è¼¯
   - æ›´æ–° `getBureauTotal()`, `getMonthData()` å‡½å¼

3. ä¸»è¦åœ–è¡¨çµ„ä»¶
   - `BubbleLine.js` - èª¿æ•´æ°£æ³¡åœ–çš„ç¯©é¸é‚è¼¯
   - `YearChart.js` - æ›´æ–°æœˆåº¦åœ–è¡¨çš„è³‡æ–™è™•ç†

4. å¹´åº¦æ§åˆ¶çµ„ä»¶
   - `YearButton.js` - å¹´åº¦é¸æ“‡å™¨çš„é¸é …ç®¡ç†

**ç¯„ä¾‹ï¼šæ–°å¢å¹´ä»½ç¯©é¸**
```javascript
// åœ¨ HomePage/index.js ä¸­
const [yearFilter, setYearFilter] = useState('all');

// åœ¨ dataHandler.js ä¸­
export const filterByYear = (data, year) => {
  if (year === 'all') return data;
  return data.filter(d => d.year === year);
};
```

### 3. åœ–è¡¨é¡è‰²ä¿®æ”¹è™•ç†

**ä¸»è¦é¡è‰²é…ç½®æª”æ¡ˆï¼š**
- `src/components/ThemeProvider/theme.js` - çµ±ä¸€è‰²å½©ç³»çµ±

**é¡è‰²ä¿®æ”¹æ–¹å¼ï¼š**

**1. ä¿®æ”¹ä¸»é¡Œè‰²å½©ï¼š**
```javascript
// åœ¨ theme.js ä¸­ä¿®æ”¹ colors ç‰©ä»¶
export default {
  colors: {
    orange: '#æ–°çš„æ©˜è‰²å€¼',
    darkBlue: '#æ–°çš„æ·±è—è‰²å€¼',
    spectrum: [
      '#è‰²å½©1',
      '#è‰²å½©2',
      // ... æ›´å¤šè‰²å½©
    ],
    // å…¶ä»–é¡è‰²å®šç¾©
  }
}
```

**2. å€‹åˆ¥åœ–è¡¨é¡è‰²ï¼š**

**BubbleLine.js (æ°£æ³¡åœ–)ï¼š**
- æ°£æ³¡é¡è‰²ï¼šä¿®æ”¹æ¼¸å±¤è‰²å½©å®šç¾©ä¸­çš„ `<LinearGradient>` å’Œ `<RadialGradient>` çµ„ä»¶
- æ”¶ç¹³ç‡æ¢å½¢ï¼šèª¿æ•´ `fill` å’Œ `stroke` å±¬æ€§çš„é¡è‰²å€¼

**YearChart.js (æœˆåº¦åœ–è¡¨)ï¼š**
- é•·æ¢åœ–é¡è‰²ï¼šä¿®æ”¹ `fill` å±¬æ€§è¨­å®š
- æŠ˜ç·šåœ–é¡è‰²ï¼šèª¿æ•´ `stroke` å±¬æ€§çš„ä¸»é¡Œè‰²å½©å¼•ç”¨

**çµ±è¨ˆé¢æ¿é¡è‰²ï¼š**
- ç›´æ¥åœ¨ä¸»çµ„ä»¶çš„ JSX ä¸­ä¿®æ”¹ `color` å’Œ `bg` å±¬æ€§
- ä½¿ç”¨ `theme.colors.é¡è‰²åç¨±` å¼•ç”¨ä¸»é¡Œè‰²å½©

**3. æ¢ä»¶å¼é¡è‰²ï¼š**
```javascript
// ç¯„ä¾‹ï¼šæ ¹æ“šæ•¸å€¼å‹•æ…‹è¨­å®šé¡è‰²
const getColor = (value) => {
  if (value > 100) return theme.colors.orange;
  if (value > 50) return theme.colors.lightOrange;
  return theme.colors.gray;
};
```
