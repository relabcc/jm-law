# æ³•åˆ¶å±€å„€éŒ¶æ¿

## ç³»çµ±ä»‹é¢å±•ç¤º

![ç³»çµ±ä¸»ä»‹é¢](screenshot.jpeg)

*ä¸»è¦åŠŸèƒ½åŒ…å«å„å±€è™•æ¡ˆä»¶é‡è¦–è¦ºåŒ–ã€æ¡ˆä»¶é¡å‹åˆ†æã€é•æ³•æ¢æ–‡çµ±è¨ˆåŠæœˆåº¦è¶¨å‹¢åˆ†æ*

### UI çµ„ä»¶å°æ‡‰èªªæ˜

| ä»‹é¢å€åŸŸ | å°æ‡‰çµ„ä»¶æª”æ¡ˆ | åŠŸèƒ½èªªæ˜ |
|---------|-------------|----------|
| ğŸ”µ **é ‚éƒ¨æ°£æ³¡åœ–è¡¨** | `BubbleLine.js` | å„å±€è™•æ¡ˆä»¶é‡è¦–è¦ºåŒ–ï¼Œåœ“å½¢å¤§å°ä»£è¡¨æ¡ˆä»¶æ•¸é‡ï¼Œä¸‹æ–¹é¡¯ç¤ºæ”¶ç¹³ç‡ |
| ğŸŸ  **å·¦ä¸‹ç”œç”œåœˆåœ–** | `TypeDonut.js` | æ¡ˆä»¶é¡å‹åˆ†å¸ƒåœ“é¤…åœ–ï¼ˆç½°é°ã€ç¨…å‹™ã€ç‰¹æ¬Šè¡Œè²»ç”¨ã€å…¶ä»–ï¼‰ |
| ğŸŸ¢ **å³ä¸‹æ©«æ¢åœ–** | `LawTops.js` | é•åæ³•æ¢ TOP 5 æ’è¡Œæ¦œ |
| ğŸŸ¡ **åº•éƒ¨æœˆåº¦åœ–è¡¨** | `YearChart.js` | æœˆæ¡ˆä»¶é‡åˆ†æï¼ˆæŠ˜ç·šåœ–+é•·æ¢åœ–çµ„åˆï¼‰ |
| ğŸ“Š **å³å´çµ±è¨ˆæ•¸æ“š** | `InfoSection.js`, `AvgDays.js` | å·²é–‹æ¡ˆé‡ã€é‡‘é¡ã€æ”¶ç¹³ã€æ’¤éŠ·ç­‰çµ±è¨ˆè³‡è¨Š |
| ğŸ›ï¸ **é ‚éƒ¨æ§åˆ¶é …** | `Dropdown.js`, `YearButton.js` | æ¡ˆä»¶é¡åˆ¥ç¯©é¸ã€å¹´åº¦åˆ‡æ›ç­‰æ§åˆ¶ä»‹é¢ |

**å®¹å™¨çµ„ä»¶ï¼š** `containers/HomePage/index.js` çµ±ç±Œç®¡ç†æ‰€æœ‰å­çµ„ä»¶çš„è³‡æ–™æµèˆ‡ç‹€æ…‹

## ä½¿ç”¨æŠ€è¡“æ¶æ§‹

### ç¨‹å¼èªè¨€èˆ‡æ ¸å¿ƒæŠ€è¡“
- **JavaScript (ES6+)** - ä¸»è¦é–‹ç™¼èªè¨€
- **React 16.9.0** - å‰ç«¯æ¡†æ¶
- **Redux + Redux-Saga** - ç‹€æ…‹ç®¡ç†èˆ‡éåŒæ­¥è™•ç†

### é–‹ç™¼æ¶æ§‹
- **Create React App** - å°ˆæ¡ˆè…³æ‰‹æ¶
- **React Hooks** - çµ„ä»¶é‚è¼¯ç®¡ç†
- **Styled Components** - CSS-in-JS æ¨£å¼è§£æ±ºæ–¹æ¡ˆ
- **Styled System** - è¨­è¨ˆç³»çµ±èˆ‡ä¸»é¡Œç®¡ç†

### è³‡æ–™è¦–è¦ºåŒ–å·¥å…·
- **@vx/* å¥—ä»¶ç¾¤** - åŸºæ–¼ D3.js çš„ React åœ–è¡¨åº«
  - `@vx/axis` - åº§æ¨™è»¸
  - `@vx/shape` - å¹¾ä½•åœ–å½¢
  - `@vx/scale` - æ¯”ä¾‹å°º
  - `@vx/tooltip` - æç¤ºæ¡†
- **D3.js ç›¸é—œ**
  - `d3-array` - é™£åˆ—è™•ç†
  - `d3-format` - æ•¸å€¼æ ¼å¼åŒ–
  - `d3-shape` - å½¢ç‹€ç”Ÿæˆ
- **Flubber** - å½¢ç‹€è®Šå½¢å‹•ç•«
- **@tweenjs/tween.js** - è£œé–“å‹•ç•«

### å…¶ä»–å·¥å…·èˆ‡å‡½å¼åº«
- **Lodash** - å·¥å…·å‡½å¼åº«
- **Immutable.js** - ä¸å¯è®Šè³‡æ–™çµæ§‹
- **React-Modal** - å½ˆçª—çµ„ä»¶
- **Open Color** - è‰²å½©ç³»çµ±

## ç¨‹å¼æ¸…å–®

### æ ¸å¿ƒç›®éŒ„çµæ§‹
```
src/
â”œâ”€â”€ components/           # é€šç”¨ UI çµ„ä»¶
â”‚   â”œâ”€â”€ Charts/          # åœ–è¡¨åŸºç¤çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChartBase.js        # åœ–è¡¨åŸºåº•é¡åˆ¥
â”‚   â”‚   â”œâ”€â”€ TweenShape.js       # å‹•ç•«å½¢ç‹€çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ PathInterpolation.js # è·¯å¾‘æ’å€¼
â”‚   â”‚   â””â”€â”€ LineBreakText.js    # å¤šè¡Œæ–‡å­—è™•ç†
â”‚   â”œâ”€â”€ ThemeProvider/   # ä¸»é¡Œç³»çµ±
â”‚   â”‚   â”œâ”€â”€ theme.js            # ä¸»é¡Œé…ç½®ï¼ˆé¡è‰²ã€å­—é«”ç­‰ï¼‰
â”‚   â”‚   â””â”€â”€ global-styles.js    # å…¨åŸŸæ¨£å¼
â”‚   â”œâ”€â”€ Button.js        # æŒ‰éˆ•çµ„ä»¶
â”‚   â”œâ”€â”€ Modal.js         # å½ˆçª—çµ„ä»¶
â”‚   â”œâ”€â”€ Dropdown.js      # ä¸‹æ‹‰é¸å–®
â”‚   â””â”€â”€ ...å…¶ä»– UI çµ„ä»¶
â”œâ”€â”€ containers/          # é é¢å®¹å™¨çµ„ä»¶
â”‚   â”œâ”€â”€ HomePage/        # ä¸»è¦–è¦ºåŒ–é é¢
â”‚   â”‚   â”œâ”€â”€ index.js            # ä¸»é é¢é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ dataHandler.js      # è³‡æ–™è™•ç†å‡½å¼
â”‚   â”‚   â”œâ”€â”€ BubbleLine.js       # æ°£æ³¡ç·šåœ–
â”‚   â”‚   â”œâ”€â”€ TypeDonut.js        # é¡å‹ç”œç”œåœˆåœ–
â”‚   â”‚   â”œâ”€â”€ YearChart.js        # å¹´åº¦åœ–è¡¨
â”‚   â”‚   â”œâ”€â”€ PercentBars.js      # ç™¾åˆ†æ¯”æ¢å½¢åœ–
â”‚   â”‚   â”œâ”€â”€ LawTops.js          # æ’è¡Œæ¦œåœ–è¡¨
â”‚   â”‚   â””â”€â”€ YearByYear/         # é€å¹´åˆ†æå­é é¢
â”‚   â”œâ”€â”€ SummaryPage/     # æ‘˜è¦é é¢
â”‚   â””â”€â”€ Layout/          # ç‰ˆé¢é…ç½®çµ„ä»¶
â”œâ”€â”€ services/            # æœå‹™å±¤
â”‚   â””â”€â”€ api/            # API ç›¸é—œ
â”‚       â”œâ”€â”€ config.js           # API åŸºç¤è¨­å®š
â”‚       â”œâ”€â”€ sagas.js            # Redux-Saga éåŒæ­¥è™•ç†
â”‚       â””â”€â”€ constants.js        # API å¸¸æ•¸å®šç¾©
â”œâ”€â”€ stores/              # ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ createStore.js          # Store å»ºç«‹è¨­å®š
â”‚   â””â”€â”€ reducers.js             # Reducer åˆä½µ
â”œâ”€â”€ utils/               # å·¥å…·å‡½å¼
â””â”€â”€ hoc/                # é«˜éšçµ„ä»¶
```

### ä¸»è¦æª”æ¡ˆåŠŸèƒ½èªªæ˜

**è³‡æ–™è™•ç†å±¤**
- `dataHandler.js` - è™•ç† JSON è³‡æ–™çš„è½‰æ›èˆ‡è¨ˆç®—é‚è¼¯
- `api/sagas.js` - ç®¡ç† API å‘¼å«èˆ‡è³‡æ–™æµ

**è¦–è¦ºåŒ–çµ„ä»¶**
- `BubbleLine.js` - æ°£æ³¡èˆ‡æŠ˜ç·šè¤‡åˆåœ–è¡¨ï¼Œå±•ç¤ºè¶¨å‹¢èˆ‡åˆ†ä½ˆ
- `TypeDonut.js` - ç”œç”œåœˆåœ–ï¼Œé¡¯ç¤ºé¡å‹å æ¯”
- `YearChart.js` - å¹´åº¦çµ±è¨ˆåœ–è¡¨
- `PercentBars.js` - ç™¾åˆ†æ¯”æ©«æ¢åœ–
- `LawTops.js` - æ’è¡Œæ¦œè¦–è¦ºåŒ–

**UI çµ„ä»¶**
- `ThemeProvider/theme.js` - çµ±ä¸€ç®¡ç†é¡è‰²ã€å­—é«”ã€æ–·é»è¨­å®š
- `Modal.js` - å½ˆçª—ç³»çµ±
- `Dropdown.js` - ç¯©é¸æ¢ä»¶é¸å–®

## ç¨‹å¼ç·¨è­¯èˆ‡å°è£

### æœ¬åœ°é–‹ç™¼
```bash
# å®‰è£ä¾è³´
npm install

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ (http://localhost:3000)
npm start

# åŸ·è¡Œæ¸¬è©¦
npm test
```

### ç”Ÿç”¢ç’°å¢ƒç·¨è­¯
```bash
# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬åˆ° build/ ç›®éŒ„
npm run build

# éƒ¨ç½²åˆ° GitHub Pages
npm run deploy
```

### å»ºç½®ç”¢å‡ºç‰©
- ç·¨è­¯å¾Œçš„éœæ…‹æª”æ¡ˆä½æ–¼ `build/` ç›®éŒ„
- åŒ…å«æœ€ä½³åŒ–çš„ JavaScriptã€CSS èˆ‡è³‡æºæª”æ¡ˆ
- æ”¯æ´ IE 11+ åŠç¾ä»£ç€è¦½å™¨

## ç¨‹å¼æ›´æ–°èˆ‡ç¶­è­·æŒ‡å—

### 1. åœ–è¡¨è®€å–è³‡æ–™ (JSON) çš„æ–¹æ³•

**API æ–‡æª”èˆ‡æ¸¬è©¦ï¼š**
- Swagger UI æ–‡æª”ï¼šhttps://relab.cc/law-api-test/doc/
  - æä¾›å®Œæ•´çš„ API ç«¯é»èªªæ˜
  - å¯ç·šä¸Šæ¸¬è©¦ API å‘¼å«
  - åŒ…å«è«‹æ±‚/å›æ‡‰æ ¼å¼ç¯„ä¾‹
  - æ”¯æ´ OAuth2 èªè­‰

**API è¨­å®šä½ç½®ï¼š**
- `src/services/api/config.js` - ä¿®æ”¹ `API_BASE` å¸¸æ•¸ä¾†è®Šæ›´è³‡æ–™ä¾†æº
  ```javascript
  const BASE_URI = 'https://relab.cc/law-api-test/v2';
  export const API_BASE = BASE_URI;
  ```

**è³‡æ–™è™•ç†æµç¨‹ï¼š**
1. API å‘¼å«åœ¨ `src/services/api/sagas.js` ä¸­è™•ç†
2. åŸå§‹ JSON è³‡æ–™ç¶“ç”± `src/containers/HomePage/dataHandler.js` è½‰æ›
3. é—œéµè½‰æ›å‡½å¼ï¼š
   - `mapData()` - å°‡åŸå§‹è³‡æ–™æ˜ å°„ç‚ºçµ„ä»¶å¯ç”¨æ ¼å¼
   - `getBureauTotal()` - è¨ˆç®—å„æ©Ÿé—œç¸½è¨ˆæ•¸æ“š
   - `getTypes()` - æå–é¡å‹çµ±è¨ˆ
   - `getMonthData()` - æ•´ç†æœˆä»½è³‡æ–™

**JSON è³‡æ–™æ ¼å¼è¦æ±‚ï¼š**
è«‹åƒè€ƒ [Swagger UI æ–‡æª”](https://relab.cc/law-api-test/doc/) ä¸­çš„ API å›æ‡‰æ ¼å¼ï¼Œè©²æ–‡æª”æä¾›ï¼š
- æœ€æ–°çš„è³‡æ–™çµæ§‹å®šç¾©
- å®Œæ•´çš„æ¬„ä½èªªæ˜
- å¯¦éš›çš„å›æ‡‰ç¯„ä¾‹
- å„ç«¯é»çš„è©³ç´°åƒæ•¸

**æ³¨æ„ï¼š** å¦‚ API æ ¼å¼æœ‰ç•°å‹•ï¼Œè«‹ä»¥ Swagger æ–‡æª”ç‚ºæº–ï¼Œä¸¦ç›¸æ‡‰æ›´æ–° `dataHandler.js` ä¸­çš„è³‡æ–™è™•ç†é‚è¼¯ã€‚

### 2. åœ–è¡¨å¢æ¸›éæ¿¾æ¢ä»¶çš„ç¨‹å¼èª¿å‹•

**éœ€è¦ä¿®æ”¹çš„æª”æ¡ˆï¼š**

**æ–°å¢ç¯©é¸æ¢ä»¶æ™‚ï¼š**
1. `src/containers/HomePage/index.js` 
   - åœ¨ state ä¸­æ–°å¢ç¯©é¸ç‹€æ…‹
   - å¢åŠ å°æ‡‰çš„ handler å‡½å¼

2. `src/containers/HomePage/dataHandler.js`
   - ä¿®æ”¹è³‡æ–™è™•ç†å‡½å¼ä»¥æ”¯æ´æ–°çš„ç¯©é¸é‚è¼¯
   - æ›´æ–° `getBureauTotal()`, `getTypes()`, `getMonthData()` å‡½å¼

3. å„åœ–è¡¨çµ„ä»¶ (`BubbleLine.js`, `TypeDonut.js` ç­‰)
   - æ¥æ”¶æ–°çš„ç¯©é¸åƒæ•¸ props
   - èª¿æ•´åœ–è¡¨æ¸²æŸ“é‚è¼¯

4. UI æ§åˆ¶çµ„ä»¶
   - `src/components/Dropdown.js` - æ–°å¢ç¯©é¸é¸é …
   - `src/components/Toggler.js` - æ–°å¢åˆ‡æ›æ§åˆ¶

**ç¯„ä¾‹ï¼šæ–°å¢å¹´ä»½ç¯©é¸**
```javascript
// åœ¨ HomePage/index.js ä¸­
const [yearFilter, setYearFilter] = useState('all');

// åœ¨ dataHandler.js ä¸­
export const filterByYear = (data, year) => {
  if (year === 'all') return data;
  return data.filter(d => d.year === year);
};
```

### 3. åœ–è¡¨é¡è‰²ä¿®æ”¹è™•ç†

**ä¸»è¦é¡è‰²é…ç½®æª”æ¡ˆï¼š**
- `src/components/ThemeProvider/theme.js` - çµ±ä¸€è‰²å½©ç³»çµ±

**é¡è‰²ä¿®æ”¹æ–¹å¼ï¼š**

**1. ä¿®æ”¹ä¸»é¡Œè‰²å½©ï¼š**
```javascript
// åœ¨ theme.js ä¸­ä¿®æ”¹ colors ç‰©ä»¶
export default {
  colors: {
    orange: '#æ–°çš„æ©˜è‰²å€¼',
    darkBlue: '#æ–°çš„æ·±è—è‰²å€¼',
    spectrum: [
      '#è‰²å½©1',
      '#è‰²å½©2',
      // ... æ›´å¤šè‰²å½©
    ],
    // å…¶ä»–é¡è‰²å®šç¾©
  }
}
```

**2. å€‹åˆ¥åœ–è¡¨é¡è‰²ï¼š**

**TypeDonut.js (ç”œç”œåœˆåœ–)ï¼š**
- ä¿®æ”¹ legends é™£åˆ—ä¸­çš„ `color` å±¬æ€§
- é¡è‰²é€é `getColorByName` ç‰©ä»¶æ˜ å°„

**BubbleLine.js (æ°£æ³¡ç·šåœ–)ï¼š**
- æ¼¸å±¤è‰²å½©å®šç¾©åœ¨ `<LinearGradient>` å’Œ `<RadialGradient>` çµ„ä»¶ä¸­
- ä¿®æ”¹ `from` å’Œ `to` å±¬æ€§å€¼

**å…¶ä»–åœ–è¡¨çµ„ä»¶ï¼š**
- ç›´æ¥åœ¨ JSX ä¸­ä¿®æ”¹ `fill` æˆ– `stroke` å±¬æ€§
- ä½¿ç”¨ `theme.colors.é¡è‰²åç¨±` å¼•ç”¨ä¸»é¡Œè‰²å½©

**3. æ¢ä»¶å¼é¡è‰²ï¼š**
```javascript
// ç¯„ä¾‹ï¼šæ ¹æ“šæ•¸å€¼å‹•æ…‹è¨­å®šé¡è‰²
const getColor = (value) => {
  if (value > 100) return theme.colors.orange;
  if (value > 50) return theme.colors.lightOrange;
  return theme.colors.gray;
};
```
