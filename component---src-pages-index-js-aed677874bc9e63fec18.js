(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{417:function(e,t,n){"use strict";n.r(t);n(6),n(7);var r=n(0),a=n.n(r),o=n(59),i=n(437),c=n.n(i),l=n(465),u=n.n(l),s=n(151),d=function(e){return a.a.createElement(s.a,e)};d.defaultProps={mx:"auto",px:["1em",null,"2em"],width:1},d.displayName="Container";var p=d,m=n(20),f=n(55),h=n(156),g=Object(f.d)(s.a).withConfig({displayName:"Flex",componentId:"sc-1wakzhz-0"})(["",""],m.h);g.defaultProps={display:"flex",blacklist:h.a},g.displayName="Flex";var y=g,b=(n(466),n(110)),v=n.n(b),E=n(168),x=n.n(E),k=n(78),w=Object(f.d)(x.a).withConfig({displayName:"Text",componentId:"sc-1vna78b-0"})(["margin-top:0;margin-bottom:0;"," "," "," "," "," ",""],m.n,m.f,m.l,m.e,m.k,Object(k.a)("textTransform"));w.defaultProps={is:"p",fontSize:"1em",blacklist:h.a},w.inline=function(e){return a.a.createElement(w,Object.assign({is:"span"},e))},w.bold=function(e){return a.a.createElement(w,Object.assign({fontWeight:"bold"},e))},w.thin=function(e){return a.a.createElement(w,Object.assign({fontWeight:"200"},e))},v()(1,7).forEach(function(e){var t="h"+e;w[t]=function(n){return a.a.createElement(w,Object.assign({is:t,fontSize:1+.125*(6-e)+"em"},n))}}),w.displayName="Text";var O=w,j=(n(4),n(3),n(1),n(8),n(440)),S=n(46),C=function(e,t){return void 0===t&&(t="color"),Object(m.m)({prop:e,cssProperty:t,key:"colors"})};var T=Object(f.c)(["",";",";",";",";"],C("hoverColor"),C("hoverBg","backgroundColor"),C("hoverBgImg","backgroundImage"),C("hoverBorder","borderColor")),_=Object(f.c)(["padding:0;border:none;font-family:inherit;line-height:1;text-decoration:none;"," "," "," "," "," "," "," "," "," "," appearance:none;transition:all ","ms;cursor:pointer;&:hover{"," outline:none;}"," ",""],m.n,m.i,m.k,m.a,Object(m.o)({scale:"gradients",prop:"gradient"}),m.l,m.e,m.b,m.c,m.d,Object(j.a)("duration",250),function(e){return!e.disabled&&T},function(e){return e.active&&!e.disabled&&T},function(e){return e.disabled&&"\n    cursor: not-allowed;\n    opacity: 0.5;\n  "}),P=Object(f.d)(x.a).withConfig({displayName:"Button__ButtonBase",componentId:"onvwh0-0"})(["",";"],_),I=function(e){return a.a.createElement(s.a,Object.assign({is:"span"},e))},R=function(e){var t=e.leftIcon,n=e.rightIcon,r=e.iconSpacing,o=e.children,i=e.verticalAlign,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["leftIcon","rightIcon","iconSpacing","children","verticalAlign"]);return a.a.createElement(P,c,t?a.a.createElement(s.a,{is:t,mr:r,verticalAlign:i}):null,a.a.createElement(I,{verticalAlign:i},o),n?a.a.createElement(s.a,{is:n,ml:r,verticalAlign:i}):null)};R.defaultProps={blacklist:h.a,is:"button",border:"1px solid",borderColor:"darkBlue",bg:"darkBlue",gradient:"darkBlue",color:"white",hoverColor:"darkBlue",hoverBg:"white",hoverBgImg:"none",hoverBorder:"darkBlue",px:"1.25em",py:"0.5em",fontWeight:"bold",iconSpacing:"0.25em",borderRadius:"1.25em",display:"inline-block",verticalAlign:"middle"},R.displayName="Button",R.lightBg=function(e){return a.a.createElement(R,Object.assign({bg:"white",color:"darkBlue",gradient:"none",border:"1px solid",borderColor:"white",hoverColor:"white",hoverBgImg:S.b.gradients.darkBlue.backgroundImage,hoverBorder:"white"},e))},R.border=function(e){return a.a.createElement(R,Object.assign({bg:"white",color:"darkBlue",gradient:"none",borderColor:"darkBlue",hoverColor:"white",hoverBg:"none",hoverBgImg:S.b.gradients.darkBlue.backgroundImage},e))},R.outline=function(e){return a.a.createElement(R,Object.assign({gradient:"none",border:"1px solid",borderColor:"primary",bg:"transparent",color:"primary",hoverColor:"white"},e))},R.transparent=function(e){return a.a.createElement(R,Object.assign({gradient:"none",border:"1px solid transparent",bg:"transparent",color:"text",hoverBorder:"primary"},e))};var L=R,B=(n(467),n(461));var A=function(e){var t,n;function o(t){var n;(n=e.call(this,t)||this).handleNextYear=function(){var e=n.state.activeYear+1;n.setState({activeYear:e},function(){n.props.onChange(n.props.years[e])})},n.handleLastYear=function(){var e=n.state.activeYear-1;n.setState({activeYear:e},function(){n.props.onChange(n.props.years[e])})};var r=t.currentYear,a=t.years;return n.state={activeYear:void 0===r?a.length-1:a.findIndex(function(e){return e===r})},n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.prototype.render=function(){var e=this.props,t=(e.currentYear,e.years),n=e.darkBg,o=(e.onChange,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["currentYear","years","darkBg","onChange"])),i=this.state.activeYear;return a.a.createElement(y,Object.assign({alignItems:"center"},o),Object(r.createElement)(n?L.lightBg:L,{px:"0.125em",py:"0.125em",borderRadius:"0.25em",disabled:!i,onClick:this.handleLastYear},a.a.createElement(B.b,{size:"1.5em"})),a.a.createElement(s.a,{px:"1.5em",py:"0.375em",border:"1px solid",mx:"0.5em",borderRadius:"0.5em"},t[i]),Object(r.createElement)(n?L.lightBg:L,{px:"0.125em",py:"0.125em",borderRadius:"0.25em",disabled:i===t.length-1,onClick:this.handleNextYear},a.a.createElement(B.c,{size:"1.5em"})))},o}(r.PureComponent);A.defaultProps={onChange:function(){}};var D=A,z=n(441),M=n(153),F=function(e){var t=e.options,n=e.activeIndex,o=e.onToggle,i=e.color,c=e.bg,l=t.map(function(){return Object(r.useState)({})});return a.a.createElement(M.a.Consumer,null,function(e){var r=e.em;return a.a.createElement(s.a,{borderRadius:"1.5em",bg:c,px:"0.5em"},a.a.createElement(s.a,{position:"relative"},a.a.createElement(s.a,{position:"absolute",left:l[n][0].left-l[0][0].left-.65*r,top:"50%",bottom:"0",width:l[n][0].width+1.3*r,transition:"all 0.25s"},a.a.createElement(s.a,{py:"1.25em",bg:i,transform:"translateY(-50%)",borderRadius:"1.25em"})),a.a.createElement(s.a,{position:"relative"},t.map(function(e,t){return a.a.createElement(z.a,{bounds:!0,onResize:function(e){var n=e.bounds;return l[t][1](n)},key:t},function(n){var r=n.measureRef;return a.a.createElement(s.a.inline,{ref:r,px:"1.25em",py:"0.5em",color:"white",onClick:function(){return o(t)}},e)})}))))})};F.defaultProps={color:"primary",bg:"rgba(255,255,255,0.2)",onToggle:function(){}};var Y=F,W=n(469),q=n.n(W),N=(n(416),n(155));var H=Object(f.d)(q.a).withConfig({displayName:"Dropdown__StyledDropdown",componentId:"sc-40ijof-0"})([".Dropdown-control{border:1px solid;border-radius:0.5em;text-align:center;background-color:white;color:black;font-family:inherit;padding:0.25em;font-size:1em;cursor:pointer;transition:none;}&.is-open{.Dropdown-control{border-radius:0.5em 0.5em 0em 0em;}}.Dropdown-menu{border:1px solid;transform:translateY(1px);border-radius:0 0 0.5em 0.5em;}.Dropdown-option{color:inherit;text-align:center;padding:0.5em 1em;border-bottom:1px solid gray;&.is-selected{background-color:",";}&:hover{background-color:",";}}.Dropdown-arrow{border-color:black transparent transparent;top:0.8em;right:0.5em;}"],Object(j.a)("colors.dropdownBg"),Object(j.a)("colors.dropdownBg")),G=function(e){e.isMobile;var t=e.options,n=e.onChange,r=(e.onBlur,e.value),o=(e.name,e.placeholder),i=e.disabled,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["isMobile","options","onChange","onBlur","value","name","placeholder","disabled"]);return a.a.createElement(s.a,c,a.a.createElement(H,{onChange:n,options:[{label:"全部",value:""}].concat(t.map(function(e){return{value:e,label:e}})),value:r,placeholder:o,disabled:i}))};G.defaultProps={placeholder:"請選擇",onChange:function(){}};var U,Q=(U=G,Object(N.c)(function(e){var t=e.get("browser");return{browser:t,isMobile:t.lessThan.md}})(U)),V=n(470),X=n.n(V),J=n(101),K=n.n(J),Z=n(5),$=n.n(Z);var ee=function(e){var t=e.children,n=e.border,r=e.borderColor,o=e.bg,i=e.is,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","border","borderColor","bg","is"]);return a.a.createElement(s.a,c,a.a.createElement(s.a,{position:"relative",pt:"100%"},a.a.createElement(s.a,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",width:1,borderRadius:"50%",border:n,borderColor:r,bg:o,is:i},a.a.createElement(s.a,{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",lineHeight:"0"},t))))};ee.propTypes={children:$.a.node,border:$.a.string,borderColor:$.a.string,bg:$.a.string,is:$.a.oneOfType([$.a.string,$.a.func])},ee.displayName="Circle";var te=ee;var ne={overlay:{zIndex:S.b.zOrder[3],backgroundColor:"rgba(0,0,0,0.7)"},content:{width:"66%",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",borderRadius:"1em",border:"none",padding:"0",backgroundColor:"rgba(255,255,255,0.9)",overflow:"unset"}};X.a.setAppElement("#___gatsby");var re=function(e){var t=e.children,n=(e.border,e.borderRadius,e.customStyles),r=e.title,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","border","borderRadius","customStyles","title"]);return a.a.createElement(X.a,Object.assign({style:K()({},ne,{content:n})},o),a.a.createElement(s.a,{py:"1.5em"},a.a.createElement(y,{justifyContent:"space-between",mx:"2em",pb:"1em",borderBottom:"1px solid",borderColor:"darkBlue",alignItems:"center"},a.a.createElement(O,{fontWeight:"bold",letterSpacing:"0.25em",fontSize:"1.25em"},r),a.a.createElement(te,{width:"2em",is:function(e){return a.a.createElement(L,Object.assign({borderRadius:"50%",px:"0",py:"0"},e))},onClick:o.onRequestClose},a.a.createElement(B.a,{size:"2em"}))),a.a.createElement(s.a,{m:"2em",position:"relative"},t)))};var ae=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={},t.openModal=function(){return t.setState({open:!0})},t.closeModal=function(){return t.setState({open:!1})},t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.prototype.render=function(){var e=this.props,t=e.is,n=e.label,o=e.title,i=e.children,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["is","label","title","children"]),l=this.state.open;return a.a.createElement(r.Fragment,null,Object(r.createElement)(t,Object.assign({onClick:this.openModal},c),n),a.a.createElement(re,{isOpen:l,onRequestClose:this.closeModal,title:o},i))},o}(r.PureComponent);ae.defaultProps={is:L};var oe=ae,ie=n(68),ce=n(237),le=n.n(ce),ue=n(31),se=n.n(ue),de=n(444),pe=n.n(de),me=n(445),fe=n.n(me),he=n(447),ge=n.n(he),ye=n(147),be=n.n(ye),ve=(n(481),n(15)),Ee=n.n(ve),xe=n(482),ke=n.n(xe),we=n(113),Oe=n.n(we),je=n(446),Se=n.n(je),Ce=n(483),Te=n.n(Ce),_e=n(28),Pe=n.n(_e);function Ie(e){var t={dispatch:Oe.a,subscribe:Oe.a,getState:Oe.a,replaceReducer:Oe.a,injectedReducers:Pe.a};Ee()(Te()(e,t),"(src/utils...) injectors: Expected a valid redux store")}var Re=n(214);function Le(e,t){return function(n,r){t||Ie(e),Ee()(Se()(n)&&!ke()(n)&&Oe()(r),"(src/utils...) injectReducer: Expected `reducer` to be a reducer function"),Reflect.has(e.injectedReducers,n)&&e.injectedReducers[n]===r||(e.injectedReducers[n]=r,e.replaceReducer(Object(Re.a)(e.injectedReducers)))}}var Be=function(e){var t=e.key,n=e.reducer;return function(e){var r=function(r){var o,i;function c(){for(var e,t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))||this).injectors=(Ie(t=e.context.store),{injectReducer:Le(t,!0)}),e}i=r,(o=c).prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i;var l=c.prototype;return l.componentWillMount=function(){(0,this.injectors.injectReducer)(t,n)},l.render=function(){return a.a.createElement(e,this.props)},c}(a.a.Component);return r.WrappedComponent=e,r.contextType=N.b,r.displayName="withReducer("+(e.displayName||e.name||"Component")+")",be()(r,e)}};var Ae=function(e,t){var n=se()(t)||pe()(t)?t:"",i=!n,c=se()(n)?n:[n],l="_LAW."+ge()(""+e+n+(t?JSON.stringify(t):""));return function(n){if(!e)return function(){return null};if("undefined"!=typeof window&&window[l])return window[l];var u=function(o){var l,u;function s(){for(var n,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(n=o.call.apply(o,[this].concat(a))||this).request=function(r,a){void 0===a&&(a=t),n.props[e]?n.checkIsPending()||!r&&n.checkIsDone()||n.props.dispatch({type:ie.a.READ_RESOURCES_PENDING,resourceType:e,resources:i?void 0:c,requestKey:i&&"list"+JSON.stringify(t),requestParams:a}):setTimeout(n.request,100)},n.resync=function(){return n.request(!0)},n.updateParams=function(e){return n.request(!0,e)},n.checkStatus=function(t){return i?le()(n.props,[e,"requests","list","status"])===t:le()(n.props,[e,"meta",c,"readStatus"])===t},n.checkIsPending=function(){return n.checkStatus(ie.b.PENDING)},n.checkIsDone=function(){return n.checkStatus(ie.b.SUCCEEDED)||n.checkStatus(ie.b.FAILED)},n}u=o,(l=s).prototype=Object.create(u.prototype),l.prototype.constructor=l,l.__proto__=u;var d=s.prototype;return d.componentDidMount=function(){setTimeout(this.request)},d.render=function(){var t,o=le()(this.props,[e,"resources"]),i=a.a.createElement(O,{textAlign:"center",my:"2em"},"Loading...");fe()(o)&&(i=Object(r.createElement)(n,Object.assign({},this.props,((t={})[e]=o,t.updateParams=this.updateParams,t))));return i},s}(r.PureComponent),s=Be({key:e,reducer:Object(ie.c)(e)}),d=Object(o.c)(s,Object(N.c)(function(t){var n;return(n={})[e]=t.get(e),n}))(u);return"undefined"!=typeof window&&(window[l]=d),d}},De=n(65),ze=n(106);var Me=function(e){var t="_LAW.state."+ge()(e);return function(n){if(!e)return function(){return null};if("undefined"!=typeof window&&window[t])return window[t];var i=function(t){var o,i;function c(){for(var n,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=t.call.apply(t,[this].concat(a))||this).state={},n.request=function(t){n.checkIsPending()||!t&&n.checkIsDone()||n.props.getData({key:e})},n.checkIsPending=function(){return n.props.status===ze.c},n.checkIsDone=function(){return n.props.status===ze.b||n.props.status===ze.a},n}i=t,(o=c).prototype=Object.create(i.prototype),o.prototype.constructor=o,o.__proto__=i;var l=c.prototype;return l.componentDidMount=function(){setTimeout(this.request)},l.render=function(){var t,o=this,i=this.props,c=i.data,l=(i.status,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(i,["data","status"])),u=a.a.createElement(O,{textAlign:"center",my:"2em"},"Loading...");fe()(c)&&(u=Object(r.createElement)(n,Object.assign({},l,((t={})[e]=c,t.resync=function(){return o.request(!0)},t))));return u},c}(r.PureComponent);return Object(N.c)(function(t){return{data:t.getIn(["api",e,"data"]),status:t.getIn(["api",e,"status"])}},function(e){return Object(o.b)({getData:De.c},e)})(i)}},Fe=n(433),Ye=n(53),We=n(423),qe=n(448),Ne=n.n(qe),He=n(533),Ge=n(422),Ue=n(420),Qe=n(511),Ve=n(454),Xe=n(419),Je=n(451),Ke=n(502),Ze=n.n(Ke);var $e=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={dimensions:{}},n.handleResize=function(e){var t=e.bounds;return n.setState({dimensions:t})},n.handleResize=Ze()(n.handleResize,200),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.children,n=e.ratio,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","ratio"]),o=this.state.dimensions,i=o.width,c=o.height;return a.a.createElement(z.a,{onResize:this.handleResize,bounds:!0},function(e){var o=e.measureRef;return a.a.createElement(s.a,Object.assign({position:"relative",pt:100*n+"%"},r,{ref:o}),i&&c&&a.a.createElement(s.a,{is:"svg",position:"absolute",top:"0",left:"0",width:i,height:c},t({width:i,height:c})))})},r}(r.PureComponent);$e.defaultProps={ratio:1/3};var et=$e;n(45),n(152);var tt=function(e){var t=e.x,n=e.y,r=e.children,o=e.fontSize,i=e.maxLength,c=e.lineHeight,l=e.lineBefore,u=e.fillFront,s=e.bg,d=e.em,p=e.style,m=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["x","y","children","fontSize","maxLength","lineHeight","lineBefore","fillFront","bg","em","style"]);if("string"!=typeof r)return a.a.createElement("text",Object.assign({x:t,y:n,fontSize:o,style:p},m),r);var f,h,g,y=function(e,t,n){if(!t)return[e];var r=Array.from(e);n||r.reverse();var a=0,o=r.reduce(function(e,r){return e[a]=e[a]||"",e[a].length==t&&(e[a+=1]=""),n?e[a]+=r:e[a]=r+e[a],e},[]);if(n||o.reverse(),n){var i=o.length;1===o[i-1].length&&(o[i-1]=o[i-2].substr(o[i-2].length-1)+o[i-1],o[i-2]=o[i-2].substr(0,o[i-2].length-1))}else 1===o[0].length&&(o[0]+=o[1][0],o[1]=o[1].substr(1));return o}(r,i,u),b=y.map(function(e,t,r){var a=r.length;return n+c*o*(l?t-a+1:t)}),v=y.map(function(e,n){return a.a.createElement("text",Object.assign({key:n,x:t,y:b[n],fontSize:o,style:p},m),e)});return s?(f=i*d,h=Math.min.apply(Math,b),g=Math.max.apply(Math,b),a.a.createElement("g",null,a.a.createElement("rect",{width:f,height:g-h+1.75*d,x:t-f/2,y:h-1.25*d,fill:s,style:p}),v)):a.a.createElement("g",null,v)};tt.defaultProps={lineHeight:1.3,y:0};var nt=tt,rt=(n(17),n(453),n(424)),at=Object(rt.a)(","),ot=function(e){var t=e.xEnd,n=e.y,r=e.em,o=e.main,i=e.sub,c=n-.8*r,l=n+1.5*r,u=t-(le()(o.unit,"length",-.25)+.25)*r,s=u-1.5*o.value.toString().length*r,d=t-(le()(i,["unit","length"],-.25)+.25)*r,p=d-.75*le()(i,"value","").toString().length*r,m=Math.min(p,s);return a.a.createElement("g",null,a.a.createElement("line",{x1:s-le()(o.label,"length")*r,x2:t,y1:n,y2:n,stroke:"black",strokeWidth:"2"}),a.a.createElement("g",null,o.unit&&a.a.createElement("text",{x:t,y:c,textAnchor:"end",fontSize:r},o.unit),a.a.createElement("text",{fill:S.b.colors.primary,x:u,y:c,textAnchor:"end",fontSize:2*r},at(o.value)),a.a.createElement("text",{x:m,y:c,textAnchor:"end",fontSize:r},o.label)),i&&a.a.createElement("g",null,a.a.createElement("text",{x:t,y:l,textAnchor:"end",fontSize:r},i.unit),a.a.createElement("text",{x:d-.25*r,y:l,textAnchor:"end",fontSize:r,color:S.b.colors.gray},at(i.value)),a.a.createElement("text",{x:m,y:l,textAnchor:"end",fontSize:r},i.label)))};var it=function(e){return a.a.createElement(r.Fragment,null,Math.round(100*e),a.a.createElement("tspan",{fontSize:"0.7em"},"%"))},ct="undefined"!=typeof window&&"00000000"===window.__ID,lt=function(e){var t,n;function o(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).state={},t.wrapper=Object(r.createRef)(),t.handleTooltip=function(e){var n=e.event,r=e.xScale,a=e.data,o=Object(Ve.a)(n).x,i=a[Math.round(r.invert(o))];i?t.setState({activeId:i.id}):t.setState({activeId:null})},t.handleClick=function(){var e=t.state.activeId,n=t.props,r=n.lockId,a=n.onLock;r?t.setState({activeId:null},function(){return a(null)}):a(e)},t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.getDerivedStateFromProps=function(e){return{namedData:e.data.reduce(function(e,t){return e[t.id]=t,e},{})}},o.prototype.render=function(){var e=this,t=this.props,n=t.data,o=t.sortBy,i=(t.sortOrder,t.onLock,t.lockId),c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["data","sortBy","sortOrder","onLock","lockId"]),l=this.state,u=l.activeId,s=l.namedData;if(!n||!n.length)return null;var d=Ne()(n,o);return a.a.createElement(M.a.Consumer,null,function(t){var o=t.em;return a.a.createElement(et,c,function(t){var c=t.width,l=t.height,p=2*o,m=.22*l,f=.075*c,h=f+m,g=c-m-.18*c,y=p+2*m+3.5*o,b=y+3*o,v=b+2.5*o,E=Object(Ue.b)({domain:[0,n.length-1],range:[h,g]}),x=Object(Ue.d)({domain:[0,Object(He.a)(n,function(e){return e.issued})],range:[0,m],exponent:.5});return a.a.createElement(r.Fragment,null,a.a.createElement(Qe.a,{from:S.b.colors.darkBlue,to:S.b.colors.darkerBlue,vertical:!1,id:"dark"}),a.a.createElement(Qe.a,{from:S.b.colors.orange6,to:S.b.colors.orange2,vertical:!1,id:"rate"}),a.a.createElement(Qe.b,{from:S.b.colors.orange4,to:S.b.colors.orange4,toOpacity:0,id:"radial-trans"}),a.a.createElement("g",null,a.a.createElement("rect",{width:f,height:l-p/2,x:0,y:p/2,opacity:.15,fill:"url('#dark')",rx:o}),[y,b-2*o/3,v-2*o/3].map(function(e,t){return a.a.createElement("line",{key:t,x1:o,x2:f-o,y1:e-2*o/3,y2:e-2*o/3,stroke:S.b.colors.text,strokeWidth:"1",strokeLinecap:"round"})}),[{label:"已開案件量",y:p+m-o/2},{label:"局處",y:y+o},{label:"收繳率",y:b+o/3},{label:"執行率",y:v+o/3}].map(function(e,t){var n=e.label,r=e.y;return a.a.createElement(nt,{key:t,x:f/2,y:r,textAnchor:"middle",fontSize:1.25*o,fontWeight:"bold",maxLength:3,letterSpacing:"2"},n)})),a.a.createElement(We.a,{start:{opacity:1},update:{opacity:[u||i?.1:1],timing:{duration:250}}},function(e){return a.a.createElement("line",Object.assign({x1:h,y1:p+m,x2:c,y2:p+m,stroke:S.b.colors.lightGray,strokeWidth:"2",strokeLinecap:"round"},e))}),a.a.createElement("rect",{width:g-h+m,height:2*o,fill:"url('#rate')",x:h-m/2,y:b-o,rx:o}),a.a.createElement(Ge.b,{x:0,y:0,width:c,height:l,fill:"transparent",data:n,onTouchStart:function(t){return e.handleTooltip({event:t,xScale:E,data:d})},onTouchMove:function(t){return e.handleTooltip({event:t,xScale:E,data:d})},onMouseMove:function(t){return e.handleTooltip({event:t,xScale:E,data:d})},onMouseLeave:function(){return e.setState({activeId:null})},onClick:e.handleClick}),a.a.createElement("g",{ref:e.wrapper},a.a.createElement(We.b,{data:d.map(function(e){return Object.assign({},e,{width:c,height:l})}),keyAccessor:function(e){return e.label},start:function(e,t){return{cx:E(t),r:0,opacity:.5,otherOpacity:1,centerR:0}},enter:function(e){return{r:[x(e.issued)],timing:{duration:500}}},update:function(e,t){var n,r=!0;return i?(r=i===e.id,n=i===e.id):u&&(r=u===e.id),[{cx:[E(t)],r:[x(e.issued)],timing:{duration:500}},{opacity:[r?.5:.1],otherOpacity:[r?1:.1],centerR:[n?o:0],timing:{duration:250}}]},leave:function(){return{opacity:[0],timing:{duration:500}}}},function(t){return a.a.createElement("g",null,t.map(function(e){var t=e.key,n=e.data,r=e.state,i=r.cx,c=r.r,l=r.opacity,u=r.otherOpacity;return a.a.createElement("g",{key:t},a.a.createElement(Ge.c,{cx:i,cy:p+m,r:c,fill:S.b.colors.orange2,opacity:l,style:{pointerEvents:"none"}}),a.a.createElement("text",{fill:S.b.colors.darkGray,x:i,y:p+m-c-.5*o,textAnchor:"middle",fontSize:o,opacity:u,style:{pointerEvents:"none"}},n.issued),a.a.createElement("line",{x1:i,x2:i,y1:p+m,y2:y+o,stroke:S.b.colors.lightGray,opacity:u,style:{pointerEvents:"none"}}),a.a.createElement(nt,{x:i,y:y+o,textAnchor:"middle",fontSize:o,maxLength:3,lineBefore:!0,em:o,bg:"white",opacity:u,style:{pointerEvents:"none"}},n.label),a.a.createElement("text",{x:i,y:b+o/3,textAnchor:"middle",fontWeight:"bold",fontSize:o,fill:"white",opacity:u,style:{pointerEvents:"none"}},it(n.receiveRate)),a.a.createElement("text",{x:i,y:v+o/3,textAnchor:"middle",fontWeight:"bold",fontSize:o,opacity:u,style:{pointerEvents:"none"}},it(n.receiveDollarRate)))}),t.map(function(t){var n=t.key,r=t.data,i=t.state,c=i.cx,l=i.otherOpacity,u=i.centerR;return a.a.createElement("g",{key:n},a.a.createElement(Ge.c,{cx:c,cy:m+p,r:m/25,fill:S.b.colors.darkGray,opacity:l,style:{pointerEvents:"none"}}),a.a.createElement(Je.HoverSensor,null,function(t){var n=t.isHover,i=p+m,l=2.5*o,s=5*o;return a.a.createElement("g",null,a.a.createElement(Ge.c,{cx:c,cy:i,r:u,fill:"url('#radial-trans')",style:ct?{cursor:"pointer"}:{},onClick:function(){ct&&window.open("?bureauId="+r.id)}}),ct&&n&&Object(Ye.createPortal)(a.a.createElement(Xe.a,{top:p+m,left:c+2*o},a.a.createElement("polygon",{points:[[-.75*o,0],[.1*o,-.5*o],[.1*o,.5*o]].map(function(e){return e.join()}).join(" "),fill:S.b.colors.orange3}),a.a.createElement("rect",{x:0,y:-l/2,width:s,height:l,fill:S.b.colors.orange3,rx:.75*o}),a.a.createElement("text",{fontSize:o,fill:"white",x:s/2,y:.3*o,textAnchor:"middle"},"前往局處")),e.wrapper.current))}))}))})),a.a.createElement(ot,{xEnd:c,y:p+2*o,em:o,main:{value:i?s[i].issued:n.reduce(function(e,t){return e+t.issued},0),label:"已開案量",unit:"件"},sub:{value:i?s[i].issuedDollar:n.reduce(function(e,t){return e+t.issuedDollar},0),label:"案件金額",unit:"元"}}),a.a.createElement(ot,{xEnd:c,y:p+9.5*o,em:o,main:{value:i?s[i].received:n.reduce(function(e,t){return e+t.received},0),label:"收繳案件",unit:"件"},sub:{value:i?s[i].receivedDollar:n.reduce(function(e,t){return e+t.receivedDollar},0),label:"收繳金額",unit:"元"}}),a.a.createElement(ot,{xEnd:c,y:p+18*o,em:o,main:{value:i?s[i].canceled:n.reduce(function(e,t){return e+t.canceled},0),label:"撤銷案件量",unit:"件"}}))})})},o}(r.PureComponent),ut=(n(79),n(455),n(456)),st=n.n(ut),dt=n(124),pt=n.n(dt),mt=n(457),ft=n.n(mt),ht=(n(426),n(515)),gt=n.n(ht),yt=n(516),bt=n(517),vt=n.n(bt);function Et(){requestAnimationFrame(Et),gt.a.update()}var xt=function(e){var t,n;function o(t){var n;(n=e.call(this,t)||this).pathRef=Object(r.createRef)(),n.updatePath=function(e){n.parsed=new yt.a(e).toAbs().commands,n.tweens=n.parsed.map(function(e,t){var r=n.prevParsed[t],a=vt()(e,pe.a),o=new gt.a.Tween(r||ft()(a,function(e,t){return"type"===t?e:0})).to(a,n.props.duration).easing(gt.a.Easing.Quadratic.InOut).onUpdate(n.handleUpdate(t));return o.start(),o})},n.handleUpdate=function(e){return function(t){n.prevParsed[e]=K()(n.prevParsed[e]||{},t),n.tick[e]=!0,n.tick.length===n.parsed.length&&n.tick.every(Boolean)&&n.doUpdatePath()}},n.doUpdatePath=function(){n.pathRef.current&&n.pathRef.current.setAttribute("d",Object(yt.b)(n.prevParsed)),n.tick.fill(null)};var a=t.d;return n.prevParsed=new yt.a(a).toAbs().commands,n.tick=[],Et(),n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=o.prototype;return i.shouldComponentUpdate=function(e){var t=e.d;return t!==this.props.d&&this.updatePath(t),!1},i.componentWillUnmount=function(){this.tweens&&this.tweens.forEach(function(e){return e.stop()})},i.render=function(){var e=this.props,t=(e.duration,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["duration"]));return a.a.createElement("path",Object.assign({ref:this.pathRef},t))},o}(r.Component);xt.defaultProps={duration:500};var kt=xt;var wt=Object(rt.a)(".0%"),Ot=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={},t.outerShapes=[],t.handleOuterShape=function(e,n){t.outerShapes[e]=n},t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.getDerivedStateFromProps=function(e){var t=e.data,n=e.legends,r=e.valueGetter;return{totalVaue:t.reduce(function(e,t){return e+r(t)},0),dataLength:t.length,labelLength:Math.floor(t.length/2)+1,getColorByName:n.reduce(function(e,t){return e[t.label]=t.color,e},{}),getIndexByName:n.reduce(function(e,t,n){return e[t.label]=n,e},{})}},o.prototype.render=function(){var e=this,t=this.props,n=t.data,o=t.legends,i=t.onLegendClick,c=t.activeLegend,l=t.valueGetter,u=t.outerCircle,s=t.showLegend,d=t.showLabel,p=t.showPercentage,m=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["data","legends","onLegendClick","activeLegend","valueGetter","outerCircle","showLegend","showLabel","showPercentage"]),f=this.state,h=f.totalVaue,g=f.dataLength,y=f.labelLength,b=f.getColorByName,E=f.getIndexByName,x=this.context.em;return a.a.createElement(et,m,function(t){var m=t.width,f=t.height,k=.45*f-(d?8*x:2*x),w=f-4*x;return a.a.createElement(r.Fragment,null,s&&a.a.createElement("g",null,o.map(function(e,t){return a.a.createElement(Xe.a,{key:t,left:x,top:w-(g-1-t)*x*1.75,onClick:function(){return i(e.label===c?null:e.label)},opacity:c&&e.label!==c?.3:1,style:{cursor:"pointer"}},a.a.createElement("circle",{cx:x/2,cy:.3*-x,r:x/2,fill:e.color}),a.a.createElement("text",{x:1.75*x,fill:"white",fontSize:x},e.label))})),a.a.createElement(Xe.a,{top:f/2,left:m/2+(s?5*x:0)},u&&a.a.createElement(r.Fragment,null,a.a.createElement(Ge.f,{data:n,pieValue:l,outerRadius:1.05*k,innerRadius:.4*k,padAngle:0,pieSort:function(e,t){return E[e.name]-E[t.name]}},function(t){return t.arcs.map(function(n,r){var o=t.path(n);return a.a.createElement("g",{key:"outer-"+n.data.name+"-"+r},a.a.createElement("path",{d:o,fill:"transparent",ref:function(){return e.handleOuterShape(r,o)}}))})}),a.a.createElement(Ge.f,{data:n,pieValue:l,outerRadius:1.1*k,innerRadius:.3*k,padAngle:0},function(e){return e.arcs.map(function(t,n){return a.a.createElement("g",{key:"bg-"+t.data.name+"-"+n},a.a.createElement("path",{d:e.path(t),fill:"white",opacity:"0.2"}))})})),a.a.createElement(Ge.f,{data:n,pieValue:l,outerRadius:k,innerRadius:.4*k,padAngle:0,pieSort:function(e,t){return E[e.name]-E[t.name]}},function(t){var n,o;if(d){var u=st()(t.arcs.map(function(e,n){return r=t.path.centroid(e),a=n,{side:Math.sign(r[0]),distanceX:Math.abs(r[0]),distanceY:r[1],index:a};var r,a}),"side"),s=pt()(u,function(e,t,n){var r=e[n]?t.concat(e[n]):t;if(t.length>y){var a=t.sort(function(e,t){return t.distanceX-e.distanceX});r=a.slice(0,y);var o=-1*n;e[o]=(e[o]||[]).concat(a.slice(y))}return e[n]=r,e},{});o=ft()(s,function(e){return Object(Ue.a)({range:[-k,k],domain:v()(0,e.length)})}),n=pt()(s,function(e,t){return t.sort(function(e,t){return e.distanceY-t.distanceY}).forEach(function(t,n){e[t.index]={side:t.side,index:n}}),e},[])}return t.arcs.map(function(u,s){var m,f,g,y,v,E,w,O,j=t.path.centroid(u),C=j[0],T=j[1],_=u.startAngle,P=u.endAngle-_>=.1,I=l(u.data);return a.a.createElement(r.Fragment,{key:"inner-"+u.data.name+"-"+s},a.a.createElement(Je.HoverSensor,null,function(n){var r=n.isHover;return a.a.createElement("g",null,a.a.createElement(kt,{d:(!c&&r||c===u.data.name)&&e.outerShapes[s]?e.outerShapes[s]:t.path(u),fill:b[u.data.name],opacity:c&&u.data.name!==c?.3:1,onClick:function(){return i(u.data.name===c?null:u.data.name)},duration:200}),P&&a.a.createElement("text",{fill:"white",x:C,y:T,dy:".33em",fontSize:x,textAnchor:"middle"},p?wt(I/h):I))}),d&&(m=n[s],f=o[m.side],g=m.side,y=(k+8*x)*g,v=f(m.index)+f.bandwidth()/2-x/2,w=T-v,O=(E=C-y+2*x*g)+Math.abs(w)*g,a.a.createElement(r.Fragment,null,a.a.createElement(Xe.a,{left:y,top:v},a.a.createElement("line",{x1:0,x2:O,y1:0,y2:0,stroke:"black"}),a.a.createElement("line",{x1:E,y1:w,x2:O,y2:0,stroke:"black"}),a.a.createElement("text",{y:1.5*x,textAnchor:g>0?"end":"start",fontSize:x,fontWeight:"bold"},u.data.name),a.a.createElement("text",{y:-.75*x,textAnchor:g>0?"end":"start",fontSize:1.5*x,fill:S.b.colors.primary,fontWeight:"bold"},l(u.data))))))})})))})},o}(r.PureComponent);Ot.contextType=M.a,Ot.defaultProps={onLegendClick:function(){}};var jt=Ot;var St=Object(rt.a)(".0%"),Ct=function(e){var t=e.data,n=e.legends,o=e.onLegendClick,i=e.activeLegend,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["data","legends","onLegendClick","activeLegend"]),l=t.reduce(function(e,t){return e[t.name]=t.received/t.issued,e},{}),u=Math.max.apply(Math,n.map(function(e){return e.label.length}));return a.a.createElement(M.a.Consumer,null,function(e){var t=e.em;return a.a.createElement(et,c,function(e){var c=e.width,s=6*t,d=Object(Ue.b)({range:[0,c-3*t-u*t*1.25],domain:[0,1]});return a.a.createElement(Xe.a,{top:s},n.map(function(e,n){var c=e.label,s=e.color,p=function(){return o(c===i?null:c)};return a.a.createElement(Xe.a,{top:n*t*2.5,opacity:i&&i!==c?.3:1,key:c+n},a.a.createElement("text",{fill:"white",fontSize:t,onClick:p,style:{cursor:"pointer"}},c),a.a.createElement("rect",{x:u*t*1.25,y:-1.25*t,width:d(1),height:1.5*t,fill:"white",opacity:"0.15"}),a.a.createElement(We.a,{start:{width:0},enter:{width:[d(l[c])],timing:{duration:500}},update:{width:[d(l[c])],timing:{duration:500}}},function(e){return a.a.createElement(r.Fragment,null,a.a.createElement("rect",Object.assign({x:u*t*1.25,y:-1.25*t,height:1.5*t},e,{fill:s,onClick:p})),a.a.createElement("text",{x:u*t*1.25+e.width+.5*t,y:"-.3em",fill:"white",fontSize:.8*t},St(l[c])))}))}))})})};var Tt=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=o.prototype;return i.componentDidUpdate=function(e){var t=this.props,n=t.year,r=t.updateParams,a=t.top;e.year!==n&&r({year:n,top:a})},i.render=function(){var e=this.props,t=e.hasLine,n=e.color,o=e.ratio,i=e.top,c=e.data,l=Ne()(c,"count").slice(0,i);return a.a.createElement(M.a.Consumer,null,function(e){var i=e.em;return a.a.createElement(et,{ratio:o},function(e){var o=e.width,c=2.5*i,u=15*i*1.1,s=Object(Ue.b)({range:[0,o-3*i-u],domain:[0,Math.max.apply(Math,l.map(function(e){return e.count}))]});return a.a.createElement(r.Fragment,null,a.a.createElement(Xe.a,{top:c},Array.from(l).reverse().map(function(e,t){return a.a.createElement(We.a,{start:{width:0},enter:{width:[s(e.count)],timing:{duration:200}},update:{width:[s(e.count)],timing:{duration:200}},key:e.id},function(r){return a.a.createElement(Xe.a,{top:t*i*2.75},a.a.createElement(nt,{fill:n,fontSize:i,maxLength:15,fillFront:!0},e.name),a.a.createElement("rect",{fill:S.b.colors.primary,x:u,y:"-0.5em",width:r.width,height:1.25*i}),a.a.createElement("text",{fill:n,x:u+r.width+.5*i,y:"0.5em"},e.count))})})),t&&a.a.createElement("line",{x1:u,x2:u,y1:c/2,y2:c/2+l.length*i*2.75,stroke:n,strokeWidth:"1.5"}))})})},o}(r.PureComponent),_t=function(e){return Object(r.createElement)((t={top:e.top,year:e.year},n=e.lockId,function(e){var a="data/bureaus";return"undefined"!=typeof window&&"00000000"!==window.__ID&&(a=a+"/"+window.__ID),n&&(a=a+"/"+n),Ae(a+="/laws",t)(function(t){return Object(r.createElement)(e,Object.assign({},t,{data:t[a]}))})})(Tt),e);var t,n},Pt=n(459),It=n(458);var Rt=function(e){return e.month},Lt=function(e){return e.issued},Bt=function(e){var t=e.data,n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["data"]),o=c()(t,function(e,t){return Object.assign({month:t},e,{receivedRate:e.received/e.issued})});return a.a.createElement(M.a.Consumer,null,function(e){var t=e.em;return a.a.createElement(et,n,function(e){var n=e.width,i=e.height,c=2*t,l=i-2*t-c,u=3*t,s=n-13*t,d=Object(Ue.a)({range:[0,s-u],domain:v()(1,13),paddingInner:.3,paddingOuter:.3}),p=Object(Ue.b)({range:[l,0],domain:[0,1.3]}),m=Object(Ue.b)({range:[l,0],domain:[0,100*Math.ceil(Math.max.apply(Math,o.map(Lt))/100)]}),f=d.bandwidth();return a.a.createElement(Xe.a,{top:c},a.a.createElement(Xe.a,{left:u},a.a.createElement(It.a,{top:0,left:0,xScale:d,yScale:p,stroke:"white",width:s-u,height:l,numTicksRows:3,numTicksColumns:0,columnLineStyle:{strokeWidth:0}}),a.a.createElement(Pt.b,{top:0,left:0,scale:p,numTicks:3,stroke:"white",strokeWidth:1.5,tickStroke:"none",tickLabelProps:function(){return{fill:"white",textAnchor:"end",fontSize:.8*t,dx:"-0.25em",dy:"0.25em"}},tickFormat:function(e){return Math.round(100*e)}}),a.a.createElement(Pt.a,{top:l,left:0,scale:d,numTicks:12,stroke:"white",strokeWidth:1.5,tickStroke:"none",tickFormat:function(e){return e+"月"},tickLabelProps:function(){return{fill:"white",fontSize:.8*t,textAnchor:"middle"}}}),a.a.createElement(Xe.a,{left:u},a.a.createElement(Ge.e,{x:function(e){return d(Rt(e))-f/2},y:function(e){return m(Lt(e))}},function(e){var t=e.path;return a.a.createElement(kt,{d:t(o),stroke:S.b.colors.lightOrange,strokeWidth:"1.5",fill:"transparent",duration:500})}),a.a.createElement(We.b,{data:o,keyAccessor:Rt,start:function(e){return{xPos:d(Rt(e)),barHeight:0,dotY:l}},enter:function(e){return{barHeight:[l-p(e.receivedRate)],dotY:[m(Lt(e))],timing:{duration:500}}},update:function(e){return{xPos:[d(Rt(e))],barHeight:[l-p(e.receivedRate)],dotY:[m(Lt(e))],timing:{duration:500}}}},function(e){return a.a.createElement(r.Fragment,null,e.map(function(e){var n=e.key,o=e.data,i=e.state,c=i.xPos,u=i.barHeight,s=i.dotY,d=l-u,p=c-f/2;return a.a.createElement(r.Fragment,{key:n},a.a.createElement(Ge.b,{x:c-f,y:d,width:f,height:u,fill:S.b.colors.lightOrange,opacity:.3}),a.a.createElement("circle",{cx:p,cy:s,r:t/3,fill:S.b.colors.spectrum[3]}),a.a.createElement("text",{x:p,y:s-t,textAnchor:"middle",fontSize:t,fill:S.b.colors.lightOrange},Lt(o)))}))}))),a.a.createElement(Xe.a,{top:l/2-t,left:s+5*t},a.a.createElement(Xe.a,null,a.a.createElement("text",null,"案件量"),a.a.createElement("line",{x1:4*t,y1:-.5*t,x2:7*t,y2:-.5*t,stroke:S.b.colors.lightOrange,strokeWidth:"1.5"})),a.a.createElement(Xe.a,{top:2.5*t},a.a.createElement("text",null,"收繳率"),a.a.createElement("rect",{x:4*t,y:-1*t,width:3*t,height:t,fill:S.b.colors.lightOrange,opacity:.3}))))})})};var At=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidUpdate=function(e,t){var n=this.props,r=n.year,a=n.updateParams;e.year!==r&&a({year:r})},o.render=function(){var e=this.props.year,t=this.props["data/avgTransferDays"];return a.a.createElement(O,null,"繳款入市庫平均日數：",le()(t,[e,"days"])," 天")},r}(r.PureComponent),Dt=function(e){return Object(r.createElement)(Ae("data/avgTransferDays",{year:e.year})(At),e)},zt=n(530),Mt=n.n(zt),Ft=n(534);var Yt=Object(f.d)(s.a).withConfig({displayName:"IssuedChart__TooltipBox",componentId:"sc-13tq6w7-0"})(['&::after{content:"";display:block;position:absolute;left:50%;top:100%;transform:translateX(-50%);width:0;height:0;border-left:0.5em solid transparent;border-right:0.5em solid transparent;border-top:0.5em solid ',";}"],S.b.colors.darkerBlue),Wt=function(e){return e.index},qt=function(e){return e.issued},Nt=function(e){return e.canceled},Ht=function(e){var t,n;function o(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).wrapper=Object(r.createRef)(),t.handleTooltip=function(e){var n=e.event,r=e.data,a=e.xScale,o=e.yScale,i=e.xStart,c=t.props.showTooltip,l=Object(Ve.a)(n).x,u=r[Math.round((l-i)/a.step())];c({tooltipData:Object.assign({canceledTop:o(Nt(u))},u),tooltipLeft:a(Wt(u))+i,tooltipTop:o(qt(u))})},t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.prototype.render=function(){var e=this,t=this.props,n=t.data,o=t.xTickFormat,i=(t.showTooltop,t.hideTooltip),c=t.tooltipData,l=t.tooltipTop,u=t.tooltipLeft,s=(t.events,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["data","xTickFormat","showTooltop","hideTooltip","tooltipData","tooltipTop","tooltipLeft","events"]));return a.a.createElement("div",{ref:this.wrapper},a.a.createElement(M.a.Consumer,null,function(t){var d=t.em;return a.a.createElement(r.Fragment,null,a.a.createElement(et,s,function(t){var s=t.width,p=t.height,m=6*d,f=p-2*d-m,h=3*d,g=s-2*d,y=Object(Ue.c)({range:[0,g-h],domain:v()(0,n.length)}),b=Math.max.apply(Math,n.map(qt)),E=function(e){if(e<10)return 0;for(var t=0;e/Math.pow(10,t)>10;)t+=1;return t}(b),x=Object(Ue.b)({range:[f,0],domain:[0,Math.ceil(b/Math.pow(10,E))*Math.pow(10,E)]});return a.a.createElement(Xe.a,null,a.a.createElement(Xe.a,{top:m,left:h},a.a.createElement(Ge.a,{x:function(e){return y(Wt(e))},y:function(e){return x(qt(e))},yScale:x},function(e){var t=e.path;return a.a.createElement(kt,{d:t(n),stroke:S.b.colors.lightOrange,fill:S.b.colors.lightOrange,opacity:.7,duration:500})}),a.a.createElement(Ge.a,{x:function(e){return y(Wt(e))},y:function(e){return x(Nt(e))},yScale:x},function(e){var t=e.path;return a.a.createElement(kt,{d:t(n),stroke:S.b.colors.orange,fill:S.b.colors.orange,duration:500})}),a.a.createElement(It.a,{top:0,left:0,xScale:y,yScale:x,stroke:S.b.colors.gray,width:g-h,height:f,numTicksRows:3,numTicksColumns:0,columnLineStyle:{strokeWidth:0}}),a.a.createElement(Pt.b,{top:0,left:0,scale:x,numTicks:3,stroke:"black",strokeWidth:1.5,tickStroke:"none",tickLabelProps:function(){return{fill:"black",textAnchor:"end",fontSize:.8*d,dx:"-0.25em",dy:"0.25em"}}}),a.a.createElement(Pt.a,{top:f,left:0,scale:y,numTicks:12,stroke:"black",strokeWidth:1.5,tickStroke:"none",tickFormat:o,tickLabelProps:function(){return{fill:"black",fontSize:.8*d,textAnchor:"middle"}}}),c&&a.a.createElement(Ge.d,{from:{x:u-h,y:l},to:{x:u-h,y:f},stroke:"white",strokeWidth:2,style:{pointerEvents:"none"}}),a.a.createElement(We.b,{data:n,keyAccessor:Wt,start:function(e){return{xPos:y(Wt(e)),dotY:x(qt(e)),dotCanceledY:x(Nt(e))}},enter:function(e){return{dotY:[x(qt(e))],timing:{duration:500}}},update:function(e){return{xPos:[y(Wt(e))],dotY:[x(qt(e))],dotCanceledY:[x(Nt(e))],timing:{duration:500}}}},function(e){return a.a.createElement(r.Fragment,null,e.map(function(e){var t=e.key,n=(e.data,e.state),o=n.xPos,i=n.dotY,c=n.dotCanceledY;return a.a.createElement(r.Fragment,{key:t},a.a.createElement("circle",{cx:o,cy:i,r:d/4,fill:S.b.colors.spectrum[3]}),a.a.createElement("circle",{cx:o,cy:c,r:d/4,fill:S.b.colors.spectrum[3]}))}))})),a.a.createElement(Xe.a,{top:1.75*d,left:g-16*d},a.a.createElement(Xe.a,null,a.a.createElement("text",null,"案件量"),a.a.createElement("rect",{x:4*d,y:-1*d,width:3*d,height:d,fill:S.b.colors.lightOrange,opacity:.7})),a.a.createElement(Xe.a,{left:8*d},a.a.createElement("text",null,"撤銷件數"),a.a.createElement("rect",{x:5.5*d,y:-1*d,width:3*d,height:d,fill:S.b.colors.orange}))),a.a.createElement(Ge.b,{x:0,y:0,width:s,height:p,fill:"transparent",data:n,onTouchStart:function(t){return e.handleTooltip({event:t,xScale:y,xStart:h,yScale:x,data:n})},onTouchMove:function(t){return e.handleTooltip({event:t,xScale:y,xStart:h,yScale:x,data:n})},onMouseMove:function(t){return e.handleTooltip({event:t,xScale:y,xStart:h,yScale:x,data:n})},onMouseLeave:function(){return i()}}),c&&a.a.createElement("g",null,a.a.createElement("circle",{cx:u,cy:l+m,r:d/2,fill:S.b.colors.darkBlue,style:{pointerEvents:"none"}}),a.a.createElement("circle",{cx:u,cy:c.canceledTop+m,r:d/2,fill:S.b.colors.darkBlue,style:{pointerEvents:"none"}})),c&&Object(Ye.createPortal)(a.a.createElement(Yt,{position:"absolute",top:l-.5*d,left:u,transform:"translateX(-50%)",p:"1em",bg:"black",color:"white",whiteSpace:"nowrap",gradient:"darkBlue",borderRadius:"0.5em",zIndex:10},a.a.createElement(O,null,"案件量 ",qt(c)),a.a.createElement(O,null,"撤銷數 ",Nt(c))),e.wrapper.current))}))}))},o}(r.PureComponent),Gt=Object(Ft.a)(Ht);var Ut=function(e){return e.index},Qt=function(e){return e.receivedRate},Vt=Object(rt.a)(".0%"),Xt=function(e){var t=e.data,n=e.xTickFormat,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["data","xTickFormat"]);return a.a.createElement(M.a.Consumer,null,function(e){var i=e.em;return a.a.createElement(et,o,function(e){var o=e.width,c=e.height,l=6*i,u=c-2*i-l,s=3*i,d=o-i,p=Object(Ue.a)({range:[0,d-s],domain:v()(0,t.length),paddingInner:.2}),m=Object(Ue.b)({range:[0,u],domain:[0,1]});return a.a.createElement(Xe.a,null,a.a.createElement(Xe.a,{top:l,left:s},a.a.createElement(We.b,{data:t,keyAccessor:Ut,start:function(e){return{xPos:p(Ut(e)),y:0}},enter:function(e){return{y:[m(Qt(e))],timing:{duration:500}}},update:function(e){return{xPos:[p(Ut(e))],y:[m(Qt(e))],timing:{duration:500}}}},function(e){return a.a.createElement(r.Fragment,null,e.map(function(e){var t=e.key,r=e.data,o=e.state,c=o.xPos,l=o.y,s=p.bandwidth();return a.a.createElement("g",{key:t},a.a.createElement("rect",{fill:"#e2e2e3",x:c,y:0,width:s,height:u}),a.a.createElement("rect",{fill:S.b.colors.lightOrange,x:c,y:u-l,width:s,height:l}),a.a.createElement("text",{fontSize:1.25*i,x:c+s/2,y:u-l-i,textAnchor:"middle"},Vt(Qt(r))),a.a.createElement("text",{fontSize:.8*i,x:c+s/2,y:u+1.5*i,textAnchor:"middle"},n(Ut(r))))}))})))})})},Jt=(n(169),["canceled","canceledDollar","issued","issuedDollar","received","receivedDollar"]),Kt=function(e,t,n){return e.reduce(function(e,r){return n&&n!==r.id||r.monthData.forEach(function(n){e[n.month]=e[n.month]||{month:n.month},Jt.forEach(function(r){e[n.month][r]=e[n.month][r]||0,e[n.month][r]+=t?n.types[t].data[r]:n.data[r]},{})}),e},{})};var Zt=function(e,t){var n=pt()(e,function(e,t){t.month;var n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["month"]);return Object.keys(n).forEach(function(t){e[t]=e[t]||0,e[t]+=n[t]}),e},t);return n.receivedRate=n.received/n.issued,n},$t=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={chartType:0,timeType:0},t.handleToggle=function(e){return function(n){var r;return t.setState(((r={})[e]=n,r))}},t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.getDerivedStateFromProps=function(e){var t,n=e.year;return{data:(t={},t[n]=e["data/bureaus?year="+n],t[n-1]=e["data/bureaus?year="+(n-1)],t[n-2]=e["data/bureaus?year="+(n-2)],t)}},o.prototype.render=function(){var e=this,t=this.state,n=t.data,o=t.chartType,i=t.timeType,c=this.props.year,l=pt()(n,function(t,n,r){var a=Kt(n.data);return i?(a=st()(a,function(e){return Math.floor((e.month-1)/3)}),Mt()(a,function(n,a){t.push(Zt(n,{year:r,quarter:+a+1,index:4*(r-e.props.year+2)+1*a}))})):t.push(Zt(a,{year:r,index:r-e.props.year+2})),t},[]),u=l.length;return a.a.createElement(s.a,{position:"relative",mx:"4em"},Object(r.createElement)(o?Xt:Gt,{key:"t-"+i,data:l,ratio:.66,xTickFormat:function(e){if(i){var t=Math.floor(e/4);return c-(u/4-t)+1+"Q"+(e%4+1)}return c-(u-e)+1}}),a.a.createElement(y,{position:"absolute",width:1,top:"0"},a.a.createElement(s.a,null,a.a.createElement(Y,{color:"darkBlue",bg:"rgba(0,0,0,0.2)",options:["案件數","收繳率"],activeIndex:o,onToggle:this.handleToggle("chartType")})),a.a.createElement(s.a,{ml:"1em"},a.a.createElement(Y,{color:"darkBlue",bg:"rgba(0,0,0,0.2)",options:["年","季"],activeIndex:i,onToggle:this.handleToggle("timeType")}))))},o}(r.PureComponent),en=function(e){return Object(r.createElement)(Object(o.c)(Me("data/bureaus?year="+e.year),Me("data/bureaus?year="+(e.year-1)),Me("data/bureaus?year="+(e.year-2)))($t),e)};var tn=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={sortBy:"receiveRate",sortOrder:"asc",chartIndex:0,lawType:0,typeLegends:[],year:u()(t.props.yearsList)},t.handleTypeFilter=function(e){return t.setState({activeType:e})},t.handleChartToggle=function(e){return t.setState({chartIndex:e})},t.handleYearChange=function(e){(0,t.props.updateParams)({year:e}),t.setState({year:e})},t.setLawType=function(e){return t.setState({lawType:e})},t.setLock=function(e){return t.setState({lockId:e})},t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.getDerivedStateFromProps=function(e){var t=e.typeList,n=e.data;return{mappedData:c()(n,function(e){var t=e.id;return{label:e.name,id:t,monthData:e.monthData.map(function(e){return Object.assign({},e,{types:e.types.reduce(function(e,t){return e[t.name]=t,e},{})})})}}),typeLegends:t.map(function(e,t){return{label:e.name,color:S.b.colors.spectrum[S.b.colors.spectrum.length-1-t]}})}},o.prototype.render=function(){var e=this,t=this.props,n=t.data,o=t.typeList,i=t.yearsList,c=this.state,l=c.sortBy,u=c.sortOrder,d=c.chartIndex,m=c.activeType,f=c.mappedData,h=c.year,g=c.lawType,b=c.typeLegends,v=c.lockId,E=function(e,t){return e.map(function(e){var n=e.label,r=e.id,a=e.monthData;return Object.assign({label:n,id:r},Jt.reduce(function(e,n){return e[n]=a.reduce(function(e,r){return e+(t?r.types[t].data[n]:r.data[n])},0),e},{}))}).map(function(e){return Object.assign({},e,{receiveRate:e.received/e.issued,receiveDollarRate:e.receivedDollar/e.issuedDollar})})}(f,m),x=Kt(f,m,v),k=function(e,t){return Object.values(pt()(e,function(e,n){var r=n.monthData,a=n.id;return t&&t!==a||r.forEach(function(t){t.types.forEach(function(t){e[t.id]=e[t.id]||{id:t.id,name:t.name,issued:0,received:0},e[t.id].issued+=t.data.issued,e[t.id].received+=t.data.received})}),e},{}))}(n,v);return a.a.createElement(Fe.a,null,a.a.createElement(s.a,{py:"4em",backgroundImage:"linear-gradient(#fff 80%, #e0e0e4 100%)"},a.a.createElement(p,null,a.a.createElement(y,{alignItems:"center"},a.a.createElement(O,{mr:"0.75em",fontSize:"1.25em",fontWeight:"bold",letterSpacing:"0.15em"},"案件類別"),a.a.createElement(s.a,{width:"12em",py:"1em"},a.a.createElement(Q,{placeholder:"全部",value:m,options:o.map(function(e){return e.name}),onChange:function(t){var n=t.value;return e.handleTypeFilter(n)}}))),a.a.createElement(y,{alignItems:"center"},a.a.createElement(O,{mr:"0.75em",fontSize:"1.25em",fontWeight:"bold",letterSpacing:"0.15em"},"各局處案件量分析"),a.a.createElement(D,{currentYear:h,years:i,onChange:this.handleYearChange})),a.a.createElement(lt,{ratio:.25,data:E,sortBy:l,sortOrder:u,lockId:v,onLock:this.setLock}))),a.a.createElement(s.a,{py:Object(S.c)(0,"2em"),gradient:"darkBlue"},a.a.createElement(p,null,a.a.createElement(y,{borderBottom:"1px solid"},a.a.createElement(s.a,{pl:"1em",pr:"2em",width:.4,borderRight:"1px solid"},a.a.createElement(s.a,{position:"relative"},Object(r.createElement)(d?Ct:jt,Object.assign({ratio:.6,data:k,legends:b,onLegendClick:this.handleTypeFilter,activeLegend:m},d?{}:{valueGetter:function(e){return e.issued},outerCircle:!0,showLegend:!0})),a.a.createElement(s.a,{position:"absolute",top:"0",left:"0"},a.a.createElement(Y,{activeIndex:d,onToggle:this.handleChartToggle,options:["案件數","收繳率"]})),a.a.createElement(s.a,{position:"absolute",right:"0",bottom:"0"},!d&&a.a.createElement(oe,{is:L.lightBg,label:"查看更多",title:"案件分類分析"},a.a.createElement(s.a,{px:"15%"},a.a.createElement(jt,{ratio:1,valueGetter:function(e){return e.issued},data:k,showPercentage:!0,legends:b,showLabel:!0})))))),a.a.createElement(s.a,{pl:"2em",pr:"1em",width:.6},a.a.createElement(y,{pt:"0.5em",pb:"1.25em",alignItems:"center",borderBottom:"1px solid"},a.a.createElement(O,{fontSize:"1.5em"},a.a.createElement(O.inline,{letterSpacing:"0.15em"},"違反法條")," TOP 5"),a.a.createElement(oe,{is:L.lightBg,label:"查看更多",title:"違反法條TOP10",mx:"2em"},a.a.createElement(y,{alignItems:"center"},a.a.createElement(s.a,{mx:"2em"},a.a.createElement(s.a,{my:"1em"},a.a.createElement(L,{active:0===g,onClick:function(){return e.setLawType(0)}},"所有法條分析")),a.a.createElement(s.a,{my:"1em"},a.a.createElement(L,{active:1===g,onClick:function(){return e.setLawType(1)}},"公安法條分析"))),a.a.createElement(s.a,{flex:"1",px:"2em"},a.a.createElement(_t,{key:10,top:10,year:h,color:"text",ratio:.8,lockId:v})))),a.a.createElement(s.a,{flex:"1"}),a.a.createElement(Dt,{year:h})),a.a.createElement(_t,{key:5,year:h,top:5,hasLine:!0,color:"white",ratio:.35,lockId:v}))),a.a.createElement(y,{px:"5%",py:"2em",alignItems:"center"},a.a.createElement(s.a,{px:"2em"},a.a.createElement(D,{justifyContent:"center",darkBg:!0,currentYear:h,years:i,onChange:this.handleYearChange}),a.a.createElement(s.a,{fontSize:"1.5em",letterSpacing:"0.15em",my:"1em",borderBottom:"1px solid",pb:"0.5rem"},"月案件量分析"),a.a.createElement(s.a,{textAlign:"center"},a.a.createElement(oe,{is:L.lightBg,label:"查看更多",title:h-2+"-"+h+"案件量分析"},a.a.createElement(en,{year:h})))),a.a.createElement(s.a,{flex:"1"},a.a.createElement(Bt,{ratio:.2,data:x}))))))},o}(r.PureComponent),nn=Object(o.c)(Me("yearsList"),Me("typeList"),function(e){var t="data/bureaus";return"undefined"!=typeof window&&"00000000"!==window.__ID&&(t=t+"/"+window.__ID),Ae(t)(function(n){return Object(r.createElement)(e,Object.assign({},n,{data:n[t]}))})})(tn);t.default=nn},425:function(e,t,n){var r;e.exports=(r=n(429))&&r.default||r},428:function(e){e.exports={data:{site:{siteMetadata:{title:"法制局",description:"法制局儀錶板",url:"https://relabcc.github.io/jm-law"}}}}},429:function(e,t,n){"use strict";n.r(t);n(6);var r=n(0),a=n.n(r),o=n(5),i=n.n(o),c=n(172),l=function(e){var t=e.location,n=e.pageResources;return n?a.a.createElement(c.a,Object.assign({location:t,pageResources:n},n.json)):null};l.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},t.default=l},433:function(e,t,n){"use strict";var r=n(428),a=n(0),o=n.n(a),i=n(5),c=n.n(i),l=n(434),u=n.n(l),s=n(108),d=(n(425),o.a.createContext({}));function p(e){var t=e.staticQueryData,n=e.data,r=e.query,a=e.render,i=n?n.data:t[r]&&t[r].data;return o.a.createElement(o.a.Fragment,null,i&&a(i),!i&&o.a.createElement("div",null,"Loading (StaticQuery)"))}var m=function(e){var t=e.data,n=e.query,r=e.render,a=e.children;return o.a.createElement(d.Consumer,null,function(e){return o.a.createElement(p,{data:t,query:n,render:r||a,staticQueryData:e})})};m.propTypes={data:c.a.object,query:c.a.string.isRequired,render:c.a.func,children:c.a.func};var f=n(151),h=function(e){var t=e.children;return o.a.createElement(m,{query:"2669241669",render:function(e){var n=e.site.siteMetadata,r=n.title,i=n.description,c=n.url;return o.a.createElement(a.Fragment,null,o.a.createElement(u.a,null,o.a.createElement("html",{lang:"zh-Hant-TW"}),o.a.createElement("title",null,r),o.a.createElement("meta",{name:"description",content:i}),o.a.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:Object(s.withPrefix)("/apple-touch-icon.png")}),o.a.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:Object(s.withPrefix)("/favicon-32x32.png")}),o.a.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:Object(s.withPrefix)("/favicon-16x16.png")}),o.a.createElement("link",{rel:"mask-icon",color:"#5bbad",href:Object(s.withPrefix)("/safari-pinned-tab.svg")}),o.a.createElement("meta",{name:"msapplication-TileColor",content:"#da532c"}),o.a.createElement("meta",{name:"theme-color",content:"#ffffff"}),o.a.createElement("meta",{property:"og:url",content:c}),o.a.createElement("meta",{property:"og:title",content:r}),o.a.createElement("meta",{property:"og:description",content:i}),o.a.createElement("meta",{property:"og:image",content:c+"/fb.png"})),o.a.createElement(f.a,{height:"100vh",minWidth:"800px"},t))},data:r})};h.propTypes={children:c.a.node.isRequired};t.a=h}}]);
//# sourceMappingURL=component---src-pages-index-js-aed677874bc9e63fec18.js.map